Index: .idea/caches/deviceStreaming.xml
===================================================================
diff --git a/.idea/caches/deviceStreaming.xml b/.idea/caches/deviceStreaming.xml
deleted file mode 100644
--- a/.idea/caches/deviceStreaming.xml	(revision 764b7528e9142b5ed946d9cafada38e8141f9a42)
+++ /dev/null	(revision 764b7528e9142b5ed946d9cafada38e8141f9a42)
@@ -1,860 +0,0 @@
-<?xml version="1.0" encoding="UTF-8"?>
-<project version="4">
-  <component name="DeviceStreaming">
-    <option name="deviceSelectionList">
-      <list>
-        <PersistentDeviceSelectionData>
-          <option name="api" value="34" />
-          <option name="brand" value="Sony" />
-          <option name="codename" value="A402SO" />
-          <option name="id" value="A402SO" />
-          <option name="labId" value="google" />
-          <option name="manufacturer" value="Sony" />
-          <option name="name" value="Xperia 10" />
-          <option name="screenDensity" value="450" />
-          <option name="screenX" value="1080" />
-          <option name="screenY" value="2520" />
-        </PersistentDeviceSelectionData>
-        <PersistentDeviceSelectionData>
-          <option name="api" value="27" />
-          <option name="brand" value="DOCOMO" />
-          <option name="codename" value="F01L" />
-          <option name="id" value="F01L" />
-          <option name="labId" value="google" />
-          <option name="manufacturer" value="FUJITSU" />
-          <option name="name" value="F-01L" />
-          <option name="screenDensity" value="360" />
-          <option name="screenX" value="720" />
-          <option name="screenY" value="1280" />
-        </PersistentDeviceSelectionData>
-        <PersistentDeviceSelectionData>
-          <option name="api" value="34" />
-          <option name="brand" value="OnePlus" />
-          <option name="codename" value="OP535DL1" />
-          <option name="id" value="OP535DL1" />
-          <option name="labId" value="google" />
-          <option name="manufacturer" value="OnePlus" />
-          <option name="name" value="CPH2409" />
-          <option name="screenDensity" value="401" />
-          <option name="screenX" value="1080" />
-          <option name="screenY" value="2412" />
-        </PersistentDeviceSelectionData>
-        <PersistentDeviceSelectionData>
-          <option name="api" value="34" />
-          <option name="brand" value="OnePlus" />
-          <option name="codename" value="OP5552L1" />
-          <option name="id" value="OP5552L1" />
-          <option name="labId" value="google" />
-          <option name="manufacturer" value="OnePlus" />
-          <option name="name" value="CPH2415" />
-          <option name="screenDensity" value="480" />
-          <option name="screenX" value="1080" />
-          <option name="screenY" value="2412" />
-        </PersistentDeviceSelectionData>
-        <PersistentDeviceSelectionData>
-          <option name="api" value="35" />
-          <option name="brand" value="OnePlus" />
-          <option name="codename" value="OP5552L1" />
-          <option name="id" value="OP5552L1" />
-          <option name="labId" value="google" />
-          <option name="manufacturer" value="OnePlus" />
-          <option name="name" value="CPH2415" />
-          <option name="screenDensity" value="480" />
-          <option name="screenX" value="1080" />
-          <option name="screenY" value="2412" />
-        </PersistentDeviceSelectionData>
-        <PersistentDeviceSelectionData>
-          <option name="api" value="34" />
-          <option name="brand" value="OPPO" />
-          <option name="codename" value="OP573DL1" />
-          <option name="id" value="OP573DL1" />
-          <option name="labId" value="google" />
-          <option name="manufacturer" value="OPPO" />
-          <option name="name" value="CPH2557" />
-          <option name="screenDensity" value="480" />
-          <option name="screenX" value="1080" />
-          <option name="screenY" value="2400" />
-        </PersistentDeviceSelectionData>
-        <PersistentDeviceSelectionData>
-          <option name="api" value="28" />
-          <option name="brand" value="DOCOMO" />
-          <option name="codename" value="SH-01L" />
-          <option name="id" value="SH-01L" />
-          <option name="labId" value="google" />
-          <option name="manufacturer" value="SHARP" />
-          <option name="name" value="AQUOS sense2 SH-01L" />
-          <option name="screenDensity" value="480" />
-          <option name="screenX" value="1080" />
-          <option name="screenY" value="2160" />
-        </PersistentDeviceSelectionData>
-        <PersistentDeviceSelectionData>
-          <option name="api" value="34" />
-          <option name="brand" value="samsung" />
-          <option name="codename" value="a14m" />
-          <option name="id" value="a14m" />
-          <option name="labId" value="google" />
-          <option name="manufacturer" value="Samsung" />
-          <option name="name" value="SM-A145R" />
-          <option name="screenDensity" value="450" />
-          <option name="screenX" value="1080" />
-          <option name="screenY" value="2408" />
-        </PersistentDeviceSelectionData>
-        <PersistentDeviceSelectionData>
-          <option name="api" value="34" />
-          <option name="brand" value="samsung" />
-          <option name="codename" value="a15" />
-          <option name="id" value="a15" />
-          <option name="labId" value="google" />
-          <option name="manufacturer" value="Samsung" />
-          <option name="name" value="A15" />
-          <option name="screenDensity" value="450" />
-          <option name="screenX" value="1080" />
-          <option name="screenY" value="2340" />
-        </PersistentDeviceSelectionData>
-        <PersistentDeviceSelectionData>
-          <option name="api" value="34" />
-          <option name="brand" value="samsung" />
-          <option name="codename" value="a15x" />
-          <option name="id" value="a15x" />
-          <option name="labId" value="google" />
-          <option name="manufacturer" value="Samsung" />
-          <option name="name" value="A15 5G" />
-          <option name="screenDensity" value="450" />
-          <option name="screenX" value="1080" />
-          <option name="screenY" value="2340" />
-        </PersistentDeviceSelectionData>
-        <PersistentDeviceSelectionData>
-          <option name="api" value="34" />
-          <option name="brand" value="samsung" />
-          <option name="codename" value="a16x" />
-          <option name="id" value="a16x" />
-          <option name="labId" value="google" />
-          <option name="manufacturer" value="Samsung" />
-          <option name="name" value="A16 5G" />
-          <option name="screenDensity" value="450" />
-          <option name="screenX" value="1080" />
-          <option name="screenY" value="2340" />
-        </PersistentDeviceSelectionData>
-        <PersistentDeviceSelectionData>
-          <option name="api" value="34" />
-          <option name="brand" value="samsung" />
-          <option name="codename" value="a35x" />
-          <option name="id" value="a35x" />
-          <option name="labId" value="google" />
-          <option name="manufacturer" value="Samsung" />
-          <option name="name" value="A35" />
-          <option name="screenDensity" value="450" />
-          <option name="screenX" value="1080" />
-          <option name="screenY" value="2340" />
-        </PersistentDeviceSelectionData>
-        <PersistentDeviceSelectionData>
-          <option name="api" value="34" />
-          <option name="brand" value="google" />
-          <option name="codename" value="akita" />
-          <option name="id" value="akita" />
-          <option name="labId" value="google" />
-          <option name="manufacturer" value="Google" />
-          <option name="name" value="Pixel 8a" />
-          <option name="screenDensity" value="420" />
-          <option name="screenX" value="1080" />
-          <option name="screenY" value="2400" />
-        </PersistentDeviceSelectionData>
-        <PersistentDeviceSelectionData>
-          <option name="api" value="35" />
-          <option name="brand" value="google" />
-          <option name="codename" value="akita" />
-          <option name="id" value="akita" />
-          <option name="labId" value="google" />
-          <option name="manufacturer" value="Google" />
-          <option name="name" value="Pixel 8a" />
-          <option name="screenDensity" value="420" />
-          <option name="screenX" value="1080" />
-          <option name="screenY" value="2400" />
-        </PersistentDeviceSelectionData>
-        <PersistentDeviceSelectionData>
-          <option name="api" value="34" />
-          <option name="brand" value="motorola" />
-          <option name="codename" value="arcfox" />
-          <option name="id" value="arcfox" />
-          <option name="labId" value="google" />
-          <option name="manufacturer" value="Motorola" />
-          <option name="name" value="razr plus 2024" />
-          <option name="screenDensity" value="360" />
-          <option name="screenX" value="1080" />
-          <option name="screenY" value="1272" />
-        </PersistentDeviceSelectionData>
-        <PersistentDeviceSelectionData>
-          <option name="api" value="33" />
-          <option name="brand" value="motorola" />
-          <option name="codename" value="austin" />
-          <option name="id" value="austin" />
-          <option name="labId" value="google" />
-          <option name="manufacturer" value="Motorola" />
-          <option name="name" value="moto g 5G (2022)" />
-          <option name="screenDensity" value="280" />
-          <option name="screenX" value="720" />
-          <option name="screenY" value="1600" />
-        </PersistentDeviceSelectionData>
-        <PersistentDeviceSelectionData>
-          <option name="api" value="33" />
-          <option name="brand" value="samsung" />
-          <option name="codename" value="b0q" />
-          <option name="id" value="b0q" />
-          <option name="labId" value="google" />
-          <option name="manufacturer" value="Samsung" />
-          <option name="name" value="Galaxy S22 Ultra" />
-          <option name="screenDensity" value="600" />
-          <option name="screenX" value="1440" />
-          <option name="screenY" value="3088" />
-        </PersistentDeviceSelectionData>
-        <PersistentDeviceSelectionData>
-          <option name="api" value="34" />
-          <option name="brand" value="samsung" />
-          <option name="codename" value="b6q" />
-          <option name="id" value="b6q" />
-          <option name="labId" value="google" />
-          <option name="manufacturer" value="Samsung" />
-          <option name="name" value="Flip 6" />
-          <option name="screenDensity" value="340" />
-          <option name="screenX" value="1080" />
-          <option name="screenY" value="2640" />
-        </PersistentDeviceSelectionData>
-        <PersistentDeviceSelectionData>
-          <option name="api" value="32" />
-          <option name="brand" value="google" />
-          <option name="codename" value="bluejay" />
-          <option name="id" value="bluejay" />
-          <option name="labId" value="google" />
-          <option name="manufacturer" value="Google" />
-          <option name="name" value="Pixel 6a" />
-          <option name="screenDensity" value="420" />
-          <option name="screenX" value="1080" />
-          <option name="screenY" value="2400" />
-        </PersistentDeviceSelectionData>
-        <PersistentDeviceSelectionData>
-          <option name="api" value="34" />
-          <option name="brand" value="google" />
-          <option name="codename" value="caiman" />
-          <option name="id" value="caiman" />
-          <option name="labId" value="google" />
-          <option name="manufacturer" value="Google" />
-          <option name="name" value="Pixel 9 Pro" />
-          <option name="screenDensity" value="360" />
-          <option name="screenX" value="960" />
-          <option name="screenY" value="2142" />
-        </PersistentDeviceSelectionData>
-        <PersistentDeviceSelectionData>
-          <option name="api" value="35" />
-          <option name="brand" value="google" />
-          <option name="codename" value="caiman" />
-          <option name="id" value="caiman" />
-          <option name="labId" value="google" />
-          <option name="manufacturer" value="Google" />
-          <option name="name" value="Pixel 9 Pro" />
-          <option name="screenDensity" value="360" />
-          <option name="screenX" value="960" />
-          <option name="screenY" value="2142" />
-        </PersistentDeviceSelectionData>
-        <PersistentDeviceSelectionData>
-          <option name="api" value="34" />
-          <option name="brand" value="google" />
-          <option name="codename" value="comet" />
-          <option name="default" value="true" />
-          <option name="id" value="comet" />
-          <option name="labId" value="google" />
-          <option name="manufacturer" value="Google" />
-          <option name="name" value="Pixel 9 Pro Fold" />
-          <option name="screenDensity" value="390" />
-          <option name="screenX" value="2076" />
-          <option name="screenY" value="2152" />
-        </PersistentDeviceSelectionData>
-        <PersistentDeviceSelectionData>
-          <option name="api" value="35" />
-          <option name="brand" value="google" />
-          <option name="codename" value="comet" />
-          <option name="default" value="true" />
-          <option name="id" value="comet" />
-          <option name="labId" value="google" />
-          <option name="manufacturer" value="Google" />
-          <option name="name" value="Pixel 9 Pro Fold" />
-          <option name="screenDensity" value="390" />
-          <option name="screenX" value="2076" />
-          <option name="screenY" value="2152" />
-        </PersistentDeviceSelectionData>
-        <PersistentDeviceSelectionData>
-          <option name="api" value="29" />
-          <option name="brand" value="samsung" />
-          <option name="codename" value="crownqlteue" />
-          <option name="id" value="crownqlteue" />
-          <option name="labId" value="google" />
-          <option name="manufacturer" value="Samsung" />
-          <option name="name" value="Galaxy Note9" />
-          <option name="screenDensity" value="420" />
-          <option name="screenX" value="2220" />
-          <option name="screenY" value="1080" />
-        </PersistentDeviceSelectionData>
-        <PersistentDeviceSelectionData>
-          <option name="api" value="34" />
-          <option name="brand" value="samsung" />
-          <option name="codename" value="dm2q" />
-          <option name="id" value="dm2q" />
-          <option name="labId" value="google" />
-          <option name="manufacturer" value="Samsung" />
-          <option name="name" value="S23 Plus" />
-          <option name="screenDensity" value="450" />
-          <option name="screenX" value="1080" />
-          <option name="screenY" value="2340" />
-        </PersistentDeviceSelectionData>
-        <PersistentDeviceSelectionData>
-          <option name="api" value="34" />
-          <option name="brand" value="samsung" />
-          <option name="codename" value="dm3q" />
-          <option name="id" value="dm3q" />
-          <option name="labId" value="google" />
-          <option name="manufacturer" value="Samsung" />
-          <option name="name" value="Galaxy S23 Ultra" />
-          <option name="screenDensity" value="600" />
-          <option name="screenX" value="1440" />
-          <option name="screenY" value="3088" />
-        </PersistentDeviceSelectionData>
-        <PersistentDeviceSelectionData>
-          <option name="api" value="34" />
-          <option name="brand" value="motorola" />
-          <option name="codename" value="dubai" />
-          <option name="id" value="dubai" />
-          <option name="labId" value="google" />
-          <option name="manufacturer" value="Motorola" />
-          <option name="name" value="edge 30" />
-          <option name="screenDensity" value="405" />
-          <option name="screenX" value="1080" />
-          <option name="screenY" value="2400" />
-        </PersistentDeviceSelectionData>
-        <PersistentDeviceSelectionData>
-          <option name="api" value="34" />
-          <option name="brand" value="samsung" />
-          <option name="codename" value="e1q" />
-          <option name="default" value="true" />
-          <option name="id" value="e1q" />
-          <option name="labId" value="google" />
-          <option name="manufacturer" value="Samsung" />
-          <option name="name" value="Galaxy S24" />
-          <option name="screenDensity" value="480" />
-          <option name="screenX" value="1080" />
-          <option name="screenY" value="2340" />
-        </PersistentDeviceSelectionData>
-        <PersistentDeviceSelectionData>
-          <option name="api" value="34" />
-          <option name="brand" value="samsung" />
-          <option name="codename" value="e3q" />
-          <option name="id" value="e3q" />
-          <option name="labId" value="google" />
-          <option name="manufacturer" value="Samsung" />
-          <option name="name" value="Galaxy S24 Ultra" />
-          <option name="screenDensity" value="450" />
-          <option name="screenX" value="1440" />
-          <option name="screenY" value="3120" />
-        </PersistentDeviceSelectionData>
-        <PersistentDeviceSelectionData>
-          <option name="api" value="33" />
-          <option name="brand" value="google" />
-          <option name="codename" value="eos" />
-          <option name="id" value="eos" />
-          <option name="labId" value="google" />
-          <option name="manufacturer" value="Google" />
-          <option name="name" value="Eos" />
-          <option name="screenDensity" value="320" />
-          <option name="screenX" value="384" />
-          <option name="screenY" value="384" />
-        </PersistentDeviceSelectionData>
-        <PersistentDeviceSelectionData>
-          <option name="api" value="35" />
-          <option name="brand" value="motorola" />
-          <option name="codename" value="eqe" />
-          <option name="id" value="eqe" />
-          <option name="labId" value="google" />
-          <option name="manufacturer" value="Motorola" />
-          <option name="name" value="edge 50 pro" />
-          <option name="screenDensity" value="450" />
-          <option name="screenX" value="1220" />
-          <option name="screenY" value="2712" />
-        </PersistentDeviceSelectionData>
-        <PersistentDeviceSelectionData>
-          <option name="api" value="33" />
-          <option name="brand" value="google" />
-          <option name="codename" value="felix" />
-          <option name="id" value="felix" />
-          <option name="labId" value="google" />
-          <option name="manufacturer" value="Google" />
-          <option name="name" value="Pixel Fold" />
-          <option name="screenDensity" value="420" />
-          <option name="screenX" value="2208" />
-          <option name="screenY" value="1840" />
-        </PersistentDeviceSelectionData>
-        <PersistentDeviceSelectionData>
-          <option name="api" value="34" />
-          <option name="brand" value="google" />
-          <option name="codename" value="felix" />
-          <option name="id" value="felix" />
-          <option name="labId" value="google" />
-          <option name="manufacturer" value="Google" />
-          <option name="name" value="Pixel Fold" />
-          <option name="screenDensity" value="420" />
-          <option name="screenX" value="2208" />
-          <option name="screenY" value="1840" />
-        </PersistentDeviceSelectionData>
-        <PersistentDeviceSelectionData>
-          <option name="api" value="33" />
-          <option name="brand" value="google" />
-          <option name="codename" value="felix_camera" />
-          <option name="id" value="felix_camera" />
-          <option name="labId" value="google" />
-          <option name="manufacturer" value="Google" />
-          <option name="name" value="Pixel Fold (Camera-enabled)" />
-          <option name="screenDensity" value="420" />
-          <option name="screenX" value="2208" />
-          <option name="screenY" value="1840" />
-        </PersistentDeviceSelectionData>
-        <PersistentDeviceSelectionData>
-          <option name="api" value="34" />
-          <option name="brand" value="motorola" />
-          <option name="codename" value="fogona" />
-          <option name="id" value="fogona" />
-          <option name="labId" value="google" />
-          <option name="manufacturer" value="Motorola" />
-          <option name="name" value="moto g play - 2024" />
-          <option name="screenDensity" value="280" />
-          <option name="screenX" value="720" />
-          <option name="screenY" value="1600" />
-        </PersistentDeviceSelectionData>
-        <PersistentDeviceSelectionData>
-          <option name="api" value="34" />
-          <option name="brand" value="motorola" />
-          <option name="codename" value="fogos" />
-          <option name="id" value="fogos" />
-          <option name="labId" value="google" />
-          <option name="manufacturer" value="Motorola" />
-          <option name="name" value="moto g34 5G" />
-          <option name="screenDensity" value="280" />
-          <option name="screenX" value="720" />
-          <option name="screenY" value="1600" />
-        </PersistentDeviceSelectionData>
-        <PersistentDeviceSelectionData>
-          <option name="api" value="34" />
-          <option name="brand" value="samsung" />
-          <option name="codename" value="g0q" />
-          <option name="id" value="g0q" />
-          <option name="labId" value="google" />
-          <option name="manufacturer" value="Samsung" />
-          <option name="name" value="SM-S906U1" />
-          <option name="screenDensity" value="450" />
-          <option name="screenX" value="1080" />
-          <option name="screenY" value="2340" />
-        </PersistentDeviceSelectionData>
-        <PersistentDeviceSelectionData>
-          <option name="api" value="34" />
-          <option name="brand" value="samsung" />
-          <option name="codename" value="gta9pwifi" />
-          <option name="id" value="gta9pwifi" />
-          <option name="labId" value="google" />
-          <option name="manufacturer" value="Samsung" />
-          <option name="name" value="SM-X210" />
-          <option name="screenDensity" value="240" />
-          <option name="screenX" value="1200" />
-          <option name="screenY" value="1920" />
-        </PersistentDeviceSelectionData>
-        <PersistentDeviceSelectionData>
-          <option name="api" value="33" />
-          <option name="brand" value="samsung" />
-          <option name="codename" value="gts7lwifi" />
-          <option name="id" value="gts7lwifi" />
-          <option name="labId" value="google" />
-          <option name="manufacturer" value="Samsung" />
-          <option name="name" value="SM-T870" />
-          <option name="screenDensity" value="340" />
-          <option name="screenX" value="1600" />
-          <option name="screenY" value="2560" />
-        </PersistentDeviceSelectionData>
-        <PersistentDeviceSelectionData>
-          <option name="api" value="34" />
-          <option name="brand" value="samsung" />
-          <option name="codename" value="gts7xllite" />
-          <option name="id" value="gts7xllite" />
-          <option name="labId" value="google" />
-          <option name="manufacturer" value="Samsung" />
-          <option name="name" value="SM-T738U" />
-          <option name="screenDensity" value="340" />
-          <option name="screenX" value="1600" />
-          <option name="screenY" value="2560" />
-        </PersistentDeviceSelectionData>
-        <PersistentDeviceSelectionData>
-          <option name="api" value="33" />
-          <option name="brand" value="samsung" />
-          <option name="codename" value="gts8uwifi" />
-          <option name="formFactor" value="Tablet" />
-          <option name="id" value="gts8uwifi" />
-          <option name="labId" value="google" />
-          <option name="manufacturer" value="Samsung" />
-          <option name="name" value="Galaxy Tab S8 Ultra" />
-          <option name="screenDensity" value="320" />
-          <option name="screenX" value="1848" />
-          <option name="screenY" value="2960" />
-        </PersistentDeviceSelectionData>
-        <PersistentDeviceSelectionData>
-          <option name="api" value="34" />
-          <option name="brand" value="samsung" />
-          <option name="codename" value="gts8wifi" />
-          <option name="formFactor" value="Tablet" />
-          <option name="id" value="gts8wifi" />
-          <option name="labId" value="google" />
-          <option name="manufacturer" value="Samsung" />
-          <option name="name" value="Galaxy Tab S8" />
-          <option name="screenDensity" value="274" />
-          <option name="screenX" value="1600" />
-          <option name="screenY" value="2560" />
-        </PersistentDeviceSelectionData>
-        <PersistentDeviceSelectionData>
-          <option name="api" value="34" />
-          <option name="brand" value="samsung" />
-          <option name="codename" value="gts9fe" />
-          <option name="id" value="gts9fe" />
-          <option name="labId" value="google" />
-          <option name="manufacturer" value="Samsung" />
-          <option name="name" value="Galaxy Tab S9 FE 5G" />
-          <option name="screenDensity" value="280" />
-          <option name="screenX" value="1440" />
-          <option name="screenY" value="2304" />
-        </PersistentDeviceSelectionData>
-        <PersistentDeviceSelectionData>
-          <option name="api" value="34" />
-          <option name="brand" value="samsung" />
-          <option name="codename" value="gts9wifi" />
-          <option name="id" value="gts9wifi" />
-          <option name="labId" value="google" />
-          <option name="manufacturer" value="Samsung" />
-          <option name="name" value="SM-X710" />
-          <option name="screenDensity" value="340" />
-          <option name="screenX" value="1600" />
-          <option name="screenY" value="2560" />
-        </PersistentDeviceSelectionData>
-        <PersistentDeviceSelectionData>
-          <option name="api" value="34" />
-          <option name="brand" value="google" />
-          <option name="codename" value="husky" />
-          <option name="id" value="husky" />
-          <option name="labId" value="google" />
-          <option name="manufacturer" value="Google" />
-          <option name="name" value="Pixel 8 Pro" />
-          <option name="screenDensity" value="390" />
-          <option name="screenX" value="1008" />
-          <option name="screenY" value="2244" />
-        </PersistentDeviceSelectionData>
-        <PersistentDeviceSelectionData>
-          <option name="api" value="30" />
-          <option name="brand" value="motorola" />
-          <option name="codename" value="java" />
-          <option name="id" value="java" />
-          <option name="labId" value="google" />
-          <option name="manufacturer" value="Motorola" />
-          <option name="name" value="G20" />
-          <option name="screenDensity" value="280" />
-          <option name="screenX" value="720" />
-          <option name="screenY" value="1600" />
-        </PersistentDeviceSelectionData>
-        <PersistentDeviceSelectionData>
-          <option name="api" value="34" />
-          <option name="brand" value="google" />
-          <option name="codename" value="komodo" />
-          <option name="id" value="komodo" />
-          <option name="labId" value="google" />
-          <option name="manufacturer" value="Google" />
-          <option name="name" value="Pixel 9 Pro XL" />
-          <option name="screenDensity" value="360" />
-          <option name="screenX" value="1008" />
-          <option name="screenY" value="2244" />
-        </PersistentDeviceSelectionData>
-        <PersistentDeviceSelectionData>
-          <option name="api" value="35" />
-          <option name="brand" value="google" />
-          <option name="codename" value="komodo" />
-          <option name="id" value="komodo" />
-          <option name="labId" value="google" />
-          <option name="manufacturer" value="Google" />
-          <option name="name" value="Pixel 9 Pro XL" />
-          <option name="screenDensity" value="360" />
-          <option name="screenX" value="1008" />
-          <option name="screenY" value="2244" />
-        </PersistentDeviceSelectionData>
-        <PersistentDeviceSelectionData>
-          <option name="api" value="34" />
-          <option name="brand" value="motorola" />
-          <option name="codename" value="lion" />
-          <option name="id" value="lion" />
-          <option name="labId" value="google" />
-          <option name="manufacturer" value="Motorola" />
-          <option name="name" value="moto g04" />
-          <option name="screenDensity" value="280" />
-          <option name="screenX" value="720" />
-          <option name="screenY" value="1612" />
-        </PersistentDeviceSelectionData>
-        <PersistentDeviceSelectionData>
-          <option name="api" value="33" />
-          <option name="brand" value="google" />
-          <option name="codename" value="lynx" />
-          <option name="id" value="lynx" />
-          <option name="labId" value="google" />
-          <option name="manufacturer" value="Google" />
-          <option name="name" value="Pixel 7a" />
-          <option name="screenDensity" value="420" />
-          <option name="screenX" value="1080" />
-          <option name="screenY" value="2400" />
-        </PersistentDeviceSelectionData>
-        <PersistentDeviceSelectionData>
-          <option name="api" value="34" />
-          <option name="brand" value="motorola" />
-          <option name="codename" value="lyriq" />
-          <option name="id" value="lyriq" />
-          <option name="labId" value="google" />
-          <option name="manufacturer" value="Motorola" />
-          <option name="name" value="edge 40" />
-          <option name="screenDensity" value="400" />
-          <option name="screenX" value="1080" />
-          <option name="screenY" value="2400" />
-        </PersistentDeviceSelectionData>
-        <PersistentDeviceSelectionData>
-          <option name="api" value="34" />
-          <option name="brand" value="motorola" />
-          <option name="codename" value="manaus" />
-          <option name="id" value="manaus" />
-          <option name="labId" value="google" />
-          <option name="manufacturer" value="Motorola" />
-          <option name="name" value="edge 40 neo" />
-          <option name="screenDensity" value="400" />
-          <option name="screenX" value="1080" />
-          <option name="screenY" value="2400" />
-        </PersistentDeviceSelectionData>
-        <PersistentDeviceSelectionData>
-          <option name="api" value="33" />
-          <option name="brand" value="motorola" />
-          <option name="codename" value="maui" />
-          <option name="id" value="maui" />
-          <option name="labId" value="google" />
-          <option name="manufacturer" value="Motorola" />
-          <option name="name" value="moto g play - 2023" />
-          <option name="screenDensity" value="280" />
-          <option name="screenX" value="720" />
-          <option name="screenY" value="1600" />
-        </PersistentDeviceSelectionData>
-        <PersistentDeviceSelectionData>
-          <option name="api" value="34" />
-          <option name="brand" value="samsung" />
-          <option name="codename" value="o1q" />
-          <option name="id" value="o1q" />
-          <option name="labId" value="google" />
-          <option name="manufacturer" value="Samsung" />
-          <option name="name" value="Galaxy S21" />
-          <option name="screenDensity" value="421" />
-          <option name="screenX" value="1080" />
-          <option name="screenY" value="2400" />
-        </PersistentDeviceSelectionData>
-        <PersistentDeviceSelectionData>
-          <option name="api" value="31" />
-          <option name="brand" value="google" />
-          <option name="codename" value="oriole" />
-          <option name="id" value="oriole" />
-          <option name="labId" value="google" />
-          <option name="manufacturer" value="Google" />
-          <option name="name" value="Pixel 6" />
-          <option name="screenDensity" value="420" />
-          <option name="screenX" value="1080" />
-          <option name="screenY" value="2400" />
-        </PersistentDeviceSelectionData>
-        <PersistentDeviceSelectionData>
-          <option name="api" value="35" />
-          <option name="brand" value="samsung" />
-          <option name="codename" value="pa3q" />
-          <option name="id" value="pa3q" />
-          <option name="labId" value="google" />
-          <option name="manufacturer" value="Samsung" />
-          <option name="name" value="Galaxy S25 Ultra" />
-          <option name="screenDensity" value="600" />
-          <option name="screenX" value="1440" />
-          <option name="screenY" value="3120" />
-        </PersistentDeviceSelectionData>
-        <PersistentDeviceSelectionData>
-          <option name="api" value="33" />
-          <option name="brand" value="google" />
-          <option name="codename" value="panther" />
-          <option name="id" value="panther" />
-          <option name="labId" value="google" />
-          <option name="manufacturer" value="Google" />
-          <option name="name" value="Pixel 7" />
-          <option name="screenDensity" value="420" />
-          <option name="screenX" value="1080" />
-          <option name="screenY" value="2400" />
-        </PersistentDeviceSelectionData>
-        <PersistentDeviceSelectionData>
-          <option name="api" value="34" />
-          <option name="brand" value="samsung" />
-          <option name="codename" value="q5q" />
-          <option name="id" value="q5q" />
-          <option name="labId" value="google" />
-          <option name="manufacturer" value="Samsung" />
-          <option name="name" value="Galaxy Z Fold5" />
-          <option name="screenDensity" value="420" />
-          <option name="screenX" value="1812" />
-          <option name="screenY" value="2176" />
-        </PersistentDeviceSelectionData>
-        <PersistentDeviceSelectionData>
-          <option name="api" value="34" />
-          <option name="brand" value="samsung" />
-          <option name="codename" value="q6q" />
-          <option name="id" value="q6q" />
-          <option name="labId" value="google" />
-          <option name="manufacturer" value="Samsung" />
-          <option name="name" value="Galaxy Z Fold6" />
-          <option name="screenDensity" value="420" />
-          <option name="screenX" value="1856" />
-          <option name="screenY" value="2160" />
-        </PersistentDeviceSelectionData>
-        <PersistentDeviceSelectionData>
-          <option name="api" value="30" />
-          <option name="brand" value="google" />
-          <option name="codename" value="r11" />
-          <option name="formFactor" value="Wear OS" />
-          <option name="id" value="r11" />
-          <option name="labId" value="google" />
-          <option name="manufacturer" value="Google" />
-          <option name="name" value="Pixel Watch" />
-          <option name="screenDensity" value="320" />
-          <option name="screenX" value="384" />
-          <option name="screenY" value="384" />
-          <option name="type" value="WEAR_OS" />
-        </PersistentDeviceSelectionData>
-        <PersistentDeviceSelectionData>
-          <option name="api" value="34" />
-          <option name="brand" value="samsung" />
-          <option name="codename" value="r11q" />
-          <option name="id" value="r11q" />
-          <option name="labId" value="google" />
-          <option name="manufacturer" value="Samsung" />
-          <option name="name" value="SM-S711U" />
-          <option name="screenDensity" value="450" />
-          <option name="screenX" value="1080" />
-          <option name="screenY" value="2340" />
-        </PersistentDeviceSelectionData>
-        <PersistentDeviceSelectionData>
-          <option name="api" value="30" />
-          <option name="brand" value="google" />
-          <option name="codename" value="redfin" />
-          <option name="id" value="redfin" />
-          <option name="labId" value="google" />
-          <option name="manufacturer" value="Google" />
-          <option name="name" value="Pixel 5" />
-          <option name="screenDensity" value="440" />
-          <option name="screenX" value="1080" />
-          <option name="screenY" value="2340" />
-        </PersistentDeviceSelectionData>
-        <PersistentDeviceSelectionData>
-          <option name="api" value="34" />
-          <option name="brand" value="google" />
-          <option name="codename" value="shiba" />
-          <option name="id" value="shiba" />
-          <option name="labId" value="google" />
-          <option name="manufacturer" value="Google" />
-          <option name="name" value="Pixel 8" />
-          <option name="screenDensity" value="420" />
-          <option name="screenX" value="1080" />
-          <option name="screenY" value="2400" />
-        </PersistentDeviceSelectionData>
-        <PersistentDeviceSelectionData>
-          <option name="api" value="34" />
-          <option name="brand" value="samsung" />
-          <option name="codename" value="t2q" />
-          <option name="id" value="t2q" />
-          <option name="labId" value="google" />
-          <option name="manufacturer" value="Samsung" />
-          <option name="name" value="Galaxy S21 Plus" />
-          <option name="screenDensity" value="394" />
-          <option name="screenX" value="1080" />
-          <option name="screenY" value="2400" />
-        </PersistentDeviceSelectionData>
-        <PersistentDeviceSelectionData>
-          <option name="api" value="33" />
-          <option name="brand" value="google" />
-          <option name="codename" value="tangorpro" />
-          <option name="formFactor" value="Tablet" />
-          <option name="id" value="tangorpro" />
-          <option name="labId" value="google" />
-          <option name="manufacturer" value="Google" />
-          <option name="name" value="Pixel Tablet" />
-          <option name="screenDensity" value="320" />
-          <option name="screenX" value="1600" />
-          <option name="screenY" value="2560" />
-        </PersistentDeviceSelectionData>
-        <PersistentDeviceSelectionData>
-          <option name="api" value="35" />
-          <option name="brand" value="google" />
-          <option name="codename" value="tegu" />
-          <option name="id" value="tegu" />
-          <option name="labId" value="google" />
-          <option name="manufacturer" value="Google" />
-          <option name="name" value="Pixel 9a" />
-          <option name="screenDensity" value="420" />
-          <option name="screenX" value="1080" />
-          <option name="screenY" value="2424" />
-        </PersistentDeviceSelectionData>
-        <PersistentDeviceSelectionData>
-          <option name="api" value="34" />
-          <option name="brand" value="google" />
-          <option name="codename" value="tokay" />
-          <option name="default" value="true" />
-          <option name="id" value="tokay" />
-          <option name="labId" value="google" />
-          <option name="manufacturer" value="Google" />
-          <option name="name" value="Pixel 9" />
-          <option name="screenDensity" value="420" />
-          <option name="screenX" value="1080" />
-          <option name="screenY" value="2424" />
-        </PersistentDeviceSelectionData>
-        <PersistentDeviceSelectionData>
-          <option name="api" value="35" />
-          <option name="brand" value="google" />
-          <option name="codename" value="tokay" />
-          <option name="default" value="true" />
-          <option name="id" value="tokay" />
-          <option name="labId" value="google" />
-          <option name="manufacturer" value="Google" />
-          <option name="name" value="Pixel 9" />
-          <option name="screenDensity" value="420" />
-          <option name="screenX" value="1080" />
-          <option name="screenY" value="2424" />
-        </PersistentDeviceSelectionData>
-        <PersistentDeviceSelectionData>
-          <option name="api" value="36" />
-          <option name="brand" value="google" />
-          <option name="codename" value="tokay" />
-          <option name="default" value="true" />
-          <option name="id" value="tokay" />
-          <option name="labId" value="google" />
-          <option name="manufacturer" value="Google" />
-          <option name="name" value="Pixel 9" />
-          <option name="screenDensity" value="420" />
-          <option name="screenX" value="1080" />
-          <option name="screenY" value="2424" />
-        </PersistentDeviceSelectionData>
-        <PersistentDeviceSelectionData>
-          <option name="api" value="34" />
-          <option name="brand" value="samsung" />
-          <option name="codename" value="xcover7" />
-          <option name="id" value="xcover7" />
-          <option name="labId" value="google" />
-          <option name="manufacturer" value="Samsung" />
-          <option name="name" value="SM-G556B" />
-          <option name="screenDensity" value="450" />
-          <option name="screenX" value="1080" />
-          <option name="screenY" value="2408" />
-        </PersistentDeviceSelectionData>
-      </list>
-    </option>
-  </component>
-</project>
\ No newline at end of file
Index: lib/pages/camera_screen.dart
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/lib/pages/camera_screen.dart b/lib/pages/camera_screen.dart
new file mode 100644
--- /dev/null	(date 1758282758231)
+++ b/lib/pages/camera_screen.dart	(date 1758282758231)
@@ -0,0 +1,276 @@
+import 'dart:async';
+import 'dart:typed_data';
+import 'package:flutter/material.dart';
+import 'package:camera/camera.dart';
+
+import '../services/emotion_detector.dart';
+
+class CameraScreen extends StatefulWidget {
+  const CameraScreen({Key? key}) : super(key: key);
+
+  @override
+  State<CameraScreen> createState() => _CameraScreenState();
+}
+
+class _CameraScreenState extends State<CameraScreen> {
+  CameraController? _cameraController;
+  List<CameraDescription> _cameras = [];
+  bool _isCameraInitialized = false;
+  bool _isDetecting = false;
+
+  final EmotionDetector _emotionDetector = EmotionDetector();
+  Map<String, double> _emotionResults = {};
+  String _predictedEmotion = '';
+  Timer? _detectionTimer;
+
+  @override
+  void initState() {
+    super.initState();
+    //_initializeCamera();
+    _loadModel();
+  }
+
+  Future<void> _loadModel() async {
+    await _emotionDetector.loadModel();
+    if (mounted) {
+      setState(() {});
+    }
+  }
+
+  // Future<void> _initializeCamera() async {
+  //
+  //   try {
+  //     _cameras = await availableCameras();
+  //     if (_cameras.isNotEmpty) {
+  //       // Use front camera if available
+  //       CameraDescription selectedCamera = _cameras.firstWhere(
+  //             (camera) => camera.lensDirection == CameraLensDirection.front,
+  //         orElse: () => _cameras.first,
+  //       );
+  //
+  //       _cameraController = CameraController(
+  //         selectedCamera,
+  //         ResolutionPreset.medium,
+  //         enableAudio: false,
+  //       );
+  //
+  //       await _cameraController!.initialize();
+  //
+  //       if (mounted) {
+  //         setState(() {
+  //           _isCameraInitialized = true;
+  //         });
+  //         _startContinuousDetection();
+  //       }
+  //     }
+  //   } catch (e) {
+  //     print('Error initializing camera: $e');
+  //     ScaffoldMessenger.of(context).showSnackBar(
+  //       SnackBar(content: Text('Failed to initialize camera: $e')),
+  //     );
+  //   }
+  // }
+
+  // void _startContinuousDetection() {
+  //   _detectionTimer = Timer.periodic(const Duration(milliseconds: 500), (timer) {
+  //     if (_emotionDetector.isModelLoaded && !_isDetecting) {
+  //       _detectEmotionFromCamera();
+  //     }
+  //   });
+  // }
+
+  // Future<void> _detectEmotionFromCamera() async {
+  //   if (_cameraController == null || !_cameraController!.value.isInitialized || _isDetecting) {
+  //     return;
+  //   }
+  //
+  //   setState(() {
+  //     _isDetecting = true;
+  //   });
+  //
+  //   try {
+  //     final XFile imageFile = await _cameraController!.takePicture();
+  //     final Uint8List imageBytes = await imageFile.readAsBytes();
+  //
+  //     final results = await _emotionDetector.detectEmotion(imageBytes);
+  //     final predicted = _emotionDetector.getPredictedEmotion(results);
+  //
+  //     if (mounted) {
+  //       setState(() {
+  //         _emotionResults = results;
+  //         _predictedEmotion = predicted;
+  //       });
+  //     }
+  //   } catch (e) {
+  //     print('Error detecting emotion: $e');
+  //   } finally {
+  //     setState(() {
+  //       _isDetecting = false;
+  //     });
+  //   }
+  // }
+
+  @override
+  void dispose() {
+    _detectionTimer?.cancel();
+    _cameraController?.dispose();
+    _emotionDetector.dispose();
+    super.dispose();
+  }
+
+  @override
+  Widget build(BuildContext context) {
+    return Scaffold(
+      appBar: AppBar(
+        title: const Text('Real-time Emotion Detection'),
+        backgroundColor: Colors.deepPurple,
+        foregroundColor: Colors.white,
+      ),
+      body: Column(
+        children: [
+          // Camera Preview
+          Expanded(
+            flex: 3,
+            child: Container(
+              width: double.infinity,
+              child: _isCameraInitialized
+                  ? CameraPreview(_cameraController!)
+                  : const Center(
+                child: Column(
+                  mainAxisAlignment: MainAxisAlignment.center,
+                  children: [
+                    CircularProgressIndicator(),
+                    SizedBox(height: 16),
+                    Text('Initializing Camera...'),
+                  ],
+                ),
+              ),
+            ),
+          ),
+
+          // Results Section
+          Expanded(
+            flex: 2,
+            child: Container(
+              width: double.infinity,
+              padding: const EdgeInsets.all(16),
+              decoration: BoxDecoration(
+                color: Colors.grey[100],
+                borderRadius: const BorderRadius.vertical(top: Radius.circular(20)),
+              ),
+              child: Column(
+                children: [
+                  // Model Status
+                  Row(
+                    children: [
+                      Icon(
+                        _emotionDetector.isModelLoaded
+                            ? Icons.check_circle
+                            : Icons.warning,
+                        color: _emotionDetector.isModelLoaded
+                            ? Colors.green
+                            : Colors.orange,
+                      ),
+                      const SizedBox(width: 8),
+                      Text(
+                        _emotionDetector.isModelLoaded
+                            ? 'Model Loaded'
+                            : 'Loading Model...',
+                        style: const TextStyle(fontWeight: FontWeight.bold),
+                      ),
+                      const Spacer(),
+                      if (_isDetecting)
+                        const SizedBox(
+                          width: 20,
+                          height: 20,
+                          child: CircularProgressIndicator(strokeWidth: 2),
+                        ),
+                    ],
+                  ),
+                  const SizedBox(height: 16),
+
+                  // Predicted Emotion
+                  if (_predictedEmotion.isNotEmpty) ...[
+                    Text(
+                      'Detected Emotion:',
+                      style: Theme.of(context).textTheme.titleMedium,
+                    ),
+                    const SizedBox(height: 8),
+                    Container(
+                      padding: const EdgeInsets.symmetric(
+                          horizontal: 24, vertical: 12),
+                      decoration: BoxDecoration(
+                        color: Colors.deepPurple,
+                        borderRadius: BorderRadius.circular(25),
+                      ),
+                      child: Text(
+                        _predictedEmotion.toUpperCase(),
+                        style: const TextStyle(
+                          color: Colors.white,
+                          fontSize: 20,
+                          fontWeight: FontWeight.bold,
+                        ),
+                      ),
+                    ),
+                    const SizedBox(height: 16),
+                  ],
+
+                  // Confidence Scores
+                  if (_emotionResults.isNotEmpty) ...[
+                    Text(
+                      'Confidence Scores:',
+                      style: Theme.of(context).textTheme.titleMedium,
+                    ),
+                    const SizedBox(height: 8),
+                    Expanded(
+                      child: ListView.builder(
+                        itemCount: _emotionResults.length,
+                        itemBuilder: (context, index) {
+                          final emotion = _emotionResults.keys.elementAt(index);
+                          final confidence = _emotionResults[emotion]!;
+                          final percentage = (confidence * 100);
+
+                          return Padding(
+                            padding: const EdgeInsets.symmetric(vertical: 4),
+                            child: Row(
+                              children: [
+                                SizedBox(
+                                  width: 80,
+                                  child: Text(
+                                    emotion,
+                                    style: const TextStyle(fontSize: 14),
+                                  ),
+                                ),
+                                Expanded(
+                                  child: LinearProgressIndicator(
+                                    value: confidence,
+                                    backgroundColor: Colors.grey[300],
+                                    valueColor: AlwaysStoppedAnimation<Color>(
+                                      Colors.deepPurple.withOpacity(0.8),
+                                    ),
+                                  ),
+                                ),
+                                const SizedBox(width: 8),
+                                SizedBox(
+                                  width: 50,
+                                  child: Text(
+                                    '${percentage.toStringAsFixed(1)}%',
+                                    style: const TextStyle(fontSize: 12),
+                                  ),
+                                ),
+                              ],
+                            ),
+                          );
+                        },
+                      ),
+                    ),
+                  ],
+                ],
+              ),
+            ),
+          ),
+        ],
+      ),
+    );
+  }
+}
\ No newline at end of file
Index: android/app/src/main/AndroidManifest.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\">\n\n    <!-- Permisses obrigatrias para Bluetooth no Android 12+ -->\n    <uses-permission android:name=\"android.permission.BLUETOOTH_SCAN\" \n        android:usesPermissionFlags=\"neverForLocation\" />\n    <uses-permission android:name=\"android.permission.BLUETOOTH_CONNECT\" />\n    <uses-permission android:name=\"android.permission.ACCESS_FINE_LOCATION\" \n        tools:remove=\"android:maxSdkVersion\" /> <!-- Remove limitao de verso -->\n    <uses-permission android:name=\"android.permission.BLUETOOTH_ADMIN\" />\n\n    <application\n        tools:replace=\"android:label\"\n        android:label=\"app\"\n        android:name=\"${applicationName}\"\n        android:icon=\"@mipmap/ic_launcher\"\n        android:requestLegacyExternalStorage=\"true\"> <!-- Para Android 10+ -->\n\n        <activity\n            android:name=\".MainActivity\"\n            android:exported=\"true\"\n            android:launchMode=\"singleTop\"\n            android:theme=\"@style/LaunchTheme\"\n            android:configChanges=\"orientation|keyboardHidden|keyboard|screenSize|smallestScreenSize|locale|layoutDirection|fontScale|screenLayout|density|uiMode\"\n            android:hardwareAccelerated=\"true\"\n            android:windowSoftInputMode=\"adjustResize\">\n\n            <meta-data\n                android:name=\"io.flutter.embedding.android.NormalTheme\"\n                android:resource=\"@style/NormalTheme\" />\n\n            <intent-filter>\n                <action android:name=\"android.intent.action.MAIN\"/>\n                <category android:name=\"android.intent.category.LAUNCHER\"/>\n            </intent-filter>\n        </activity>\n\n        <activity   android:name=\"com.shimmerresearch.android.guiUtilities.ShimmerBluetoothDialog\"\n            android:theme=\"@android:style/Theme.Dialog\">\n        </activity>\n\n        <!-- Necessrio para comunicao Bluetooth -->\n        <meta-data\n            android:name=\"flutterEmbedding\"\n            android:value=\"2\" />\n    </application>\n\n    <!-- Para Android 11+ -->\n    <queries>\n        <intent>\n            <action android:name=\"android.intent.action.PROCESS_TEXT\"/>\n            <data android:mimeType=\"text/plain\"/>\n        </intent>\n        <!-- Permite descobrir dispositivos Bluetooth -->\n        <intent>\n            <action android:name=\"android.bluetooth.devicepicker.action.LAUNCH\" />\n        </intent>\n    </queries>\n</manifest>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/android/app/src/main/AndroidManifest.xml b/android/app/src/main/AndroidManifest.xml
--- a/android/app/src/main/AndroidManifest.xml	(revision 764b7528e9142b5ed946d9cafada38e8141f9a42)
+++ b/android/app/src/main/AndroidManifest.xml	(date 1758113203342)
@@ -1,6 +1,14 @@
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
     xmlns:tools="http://schemas.android.com/tools">
 
+    <uses-permission android:name="android.permission.CAMERA" />
+    <uses-feature
+        android:name="android.hardware.camera"
+        android:required="false" />
+    <uses-feature
+        android:name="android.hardware.camera.front"
+        android:required="false" />
+
     <!-- Permisses obrigatrias para Bluetooth no Android 12+ -->
     <uses-permission android:name="android.permission.BLUETOOTH_SCAN" 
         android:usesPermissionFlags="neverForLocation" />
Index: lib/services/emotion_detector.dart
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>import 'package:flutter/material.dart';\nimport '../models/sensor_data.dart';\nimport 'feature_extractor.dart';// your SensorData model\n\nenum EmotionType {\n  neutral,\n  happy,\n  stressed,\n  excited,\n  calm,\n  frustrated\n}\n\nclass EmotionResult {\n  final EmotionType emotion;\n  final double confidence;\n  final DateTime timestamp;\n  final Map<String, double> features;\n\n  EmotionResult({\n    required this.emotion,\n    required this.confidence,\n    required this.timestamp,\n    required this.features,\n  });\n}\n\nclass EmotionDetector {\n  static const int _windowSize = 50;\n  static const int _minDataPoints = 20;\n\n  static EmotionResult? detectEmotion(List<SensorData> sensorDataList) {\n    if (sensorDataList.length < _minDataPoints) return null;\n\n    List<SensorData> dataWindow = sensorDataList.length > _windowSize\n        ? sensorDataList.sublist(sensorDataList.length - _windowSize)\n        : sensorDataList;\n\n    Map<String, double> features = FeatureExtractor.extractFeatures(dataWindow);\n    return _classifyEmotion(features);\n  }\n\n  static EmotionResult _classifyEmotion(Map<String, double> features) {\n    EmotionType emotion = EmotionType.neutral;\n    double confidence = 0.5;\n\n    double gsrMean = features['gsr_mean'] ?? 0.0;\n    double ppgMean = features['ppg_mean'] ?? 0.0;\n    double ppgStd = features['ppg_std'] ?? 0.0;\n    double accelStd = features['accel_std'] ?? 0.0;\n    double gsrSlope = features['gsr_slope'] ?? 0.0;\n\n    if (gsrMean > 0.7 && ppgMean > 80) {\n      if (accelStd > 0.5) {\n        emotion = EmotionType.excited;\n        confidence = 0.8;\n      } else {\n        emotion = EmotionType.stressed;\n        confidence = 0.75;\n      }\n    } else if (gsrMean > 0.5 && ppgStd > 10) {\n      emotion = EmotionType.frustrated;\n      confidence = 0.7;\n    } else if (ppgMean > 75 && accelStd > 0.3 && gsrSlope > 0) {\n      emotion = EmotionType.happy;\n      confidence = 0.75;\n    } else if (gsrMean < 0.3 && ppgMean < 70 && accelStd < 0.2) {\n      emotion = EmotionType.calm;\n      confidence = 0.8;\n    } else {\n      emotion = EmotionType.neutral;\n      confidence = 0.6;\n    }\n\n    return EmotionResult(\n      emotion: emotion,\n      confidence: confidence,\n      timestamp: DateTime.now(),\n      features: features,\n    );\n  }\n\n  static Color getEmotionColor(EmotionType emotion) {\n    switch (emotion) {\n      case EmotionType.happy:\n        return Colors.yellow;\n      case EmotionType.excited:\n        return Colors.orange;\n      case EmotionType.stressed:\n        return Colors.red;\n      case EmotionType.frustrated:\n        return Colors.deepOrange;\n      case EmotionType.calm:\n        return Colors.blue;\n      case EmotionType.neutral:\n        return Colors.grey;\n    }\n  }\n\n  static String getEmotionDescription(EmotionType emotion) {\n    switch (emotion) {\n      case EmotionType.happy:\n        return \"Happy - Positive arousal with moderate activity\";\n      case EmotionType.excited:\n        return \"Excited - High arousal with high activity\";\n      case EmotionType.stressed:\n        return \"Stressed - High arousal with low activity\";\n      case EmotionType.frustrated:\n        return \"Frustrated - Variable arousal with tension\";\n      case EmotionType.calm:\n        return \"Calm - Low arousal with relaxed state\";\n      case EmotionType.neutral:\n        return \"Neutral - Balanced emotional state\";\n    }\n  }\n}\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/lib/services/emotion_detector.dart b/lib/services/emotion_detector.dart
--- a/lib/services/emotion_detector.dart	(revision 764b7528e9142b5ed946d9cafada38e8141f9a42)
+++ b/lib/services/emotion_detector.dart	(date 1758282758225)
@@ -1,116 +1,106 @@
-import 'package:flutter/material.dart';
-import '../models/sensor_data.dart';
-import 'feature_extractor.dart';// your SensorData model
-
-enum EmotionType {
-  neutral,
-  happy,
-  stressed,
-  excited,
-  calm,
-  frustrated
-}
-
-class EmotionResult {
-  final EmotionType emotion;
-  final double confidence;
-  final DateTime timestamp;
-  final Map<String, double> features;
-
-  EmotionResult({
-    required this.emotion,
-    required this.confidence,
-    required this.timestamp,
-    required this.features,
-  });
-}
+import 'dart:io';
+import 'dart:typed_data';
+import 'package:flutter/services.dart';
+import 'package:tflite_flutter/tflite_flutter.dart';
+import 'package:image/image.dart' as img;
 
 class EmotionDetector {
-  static const int _windowSize = 50;
-  static const int _minDataPoints = 20;
+  late Interpreter _interpreter;
+  late List<String> _labels;
+  bool _isModelLoaded = false;
+
+  bool get isModelLoaded => _isModelLoaded;
+  List<String> get labels => _labels;
 
-  static EmotionResult? detectEmotion(List<SensorData> sensorDataList) {
-    if (sensorDataList.length < _minDataPoints) return null;
+  Future<void> loadModel() async {
+    try {
+      // Load the TFLite model
+      _interpreter = await Interpreter.fromAsset('assets/model_unquant.tflite');
 
-    List<SensorData> dataWindow = sensorDataList.length > _windowSize
-        ? sensorDataList.sublist(sensorDataList.length - _windowSize)
-        : sensorDataList;
+      // Load labels
+      final labelsData = await rootBundle.loadString('assets/labels.txt');
+      _labels = labelsData.split('\n').where((label) => label.isNotEmpty).toList();
+
+      _isModelLoaded = true;
+      print('Model loaded successfully with ${_labels.length} labels');
+      print('Labels: $_labels');
+    } catch (e) {
+      print('Failed to load model: $e');
+      _isModelLoaded = false;
+    }
+  }
 
-    Map<String, double> features = FeatureExtractor.extractFeatures(dataWindow);
-    return _classifyEmotion(features);
-  }
+  Future<Map<String, double>> detectEmotion(img.Image inputImage) async {
+    if (!_isModelLoaded) {
+      throw Exception('Model not loaded');
+    }
 
-  static EmotionResult _classifyEmotion(Map<String, double> features) {
-    EmotionType emotion = EmotionType.neutral;
-    double confidence = 0.5;
+    try {
+      // // Decode and preprocess the image
+      // img.Image? image = img.decodeImage(inputImage);
+      // if (image == null) {
+      //   throw Exception('Failed to decode image');
+      // }
 
-    double gsrMean = features['gsr_mean'] ?? 0.0;
-    double ppgMean = features['ppg_mean'] ?? 0.0;
-    double ppgStd = features['ppg_std'] ?? 0.0;
-    double accelStd = features['accel_std'] ?? 0.0;
-    double gsrSlope = features['gsr_slope'] ?? 0.0;
+      // Resize to 224x224 (Teachable Machine default) or check your model's expected input size
+      // You may need to adjust this size based on your actual model requirements
+      img.Image resizedImage = img.copyResize(inputImage, width: 224, height: 224);
 
-    if (gsrMean > 0.7 && ppgMean > 80) {
-      if (accelStd > 0.5) {
-        emotion = EmotionType.excited;
-        confidence = 0.8;
-      } else {
-        emotion = EmotionType.stressed;
-        confidence = 0.75;
-      }
-    } else if (gsrMean > 0.5 && ppgStd > 10) {
-      emotion = EmotionType.frustrated;
-      confidence = 0.7;
-    } else if (ppgMean > 75 && accelStd > 0.3 && gsrSlope > 0) {
-      emotion = EmotionType.happy;
-      confidence = 0.75;
-    } else if (gsrMean < 0.3 && ppgMean < 70 && accelStd < 0.2) {
-      emotion = EmotionType.calm;
-      confidence = 0.8;
-    } else {
-      emotion = EmotionType.neutral;
-      confidence = 0.6;
-    }
+      // Convert to Float32List and normalize (0-1) for RGB input
+      var input = Float32List(1 * 224 * 224 * 3);
+      int pixelIndex = 0;
+
+      for (int y = 0; y < 224; y++) {
+        for (int x = 0; x < 224; x++) {
+          // Get pixel as Pixel object (new API)
+          final pixel = resizedImage.getPixel(x, y);
+          // Add RGB values normalized to 0-1
+          input[pixelIndex++] = pixel.r / 255.0;     // Red
+          input[pixelIndex++] = pixel.g / 255.0;     // Green
+          input[pixelIndex++] = pixel.b / 255.0;     // Blue
+        }
+      }
 
-    return EmotionResult(
-      emotion: emotion,
-      confidence: confidence,
-      timestamp: DateTime.now(),
-      features: features,
-    );
-  }
+      // Reshape input for the model [1, 224, 224, 3]
+      var inputData = input.reshape([1, 224, 224, 3]);
+
+      // Prepare output tensor
+      var output = List.filled(1 * _labels.length, 0.0).reshape([1, _labels.length]);
+
+      // Run inference
+      _interpreter.run(inputData, output);
+
+      // Process results
+      List<double> probabilities = output[0].cast<double>();
+
+      // Create result map
+      Map<String, double> results = {};
+      for (int i = 0; i < _labels.length; i++) {
+        results[_labels[i]] = probabilities[i];
+      }
 
-  static Color getEmotionColor(EmotionType emotion) {
-    switch (emotion) {
-      case EmotionType.happy:
-        return Colors.yellow;
-      case EmotionType.excited:
-        return Colors.orange;
-      case EmotionType.stressed:
-        return Colors.red;
-      case EmotionType.frustrated:
-        return Colors.deepOrange;
-      case EmotionType.calm:
-        return Colors.blue;
-      case EmotionType.neutral:
-        return Colors.grey;
+      return results;
+    } catch (e) {
+      print('Error during emotion detection: $e');
+      rethrow;
     }
   }
 
-  static String getEmotionDescription(EmotionType emotion) {
-    switch (emotion) {
-      case EmotionType.happy:
-        return "Happy - Positive arousal with moderate activity";
-      case EmotionType.excited:
-        return "Excited - High arousal with high activity";
-      case EmotionType.stressed:
-        return "Stressed - High arousal with low activity";
-      case EmotionType.frustrated:
-        return "Frustrated - Variable arousal with tension";
-      case EmotionType.calm:
-        return "Calm - Low arousal with relaxed state";
-      case EmotionType.neutral:
-        return "Neutral - Balanced emotional state";
-    }
+  String getPredictedEmotion(Map<String, double> results) {
+    String maxEmotion = '';
+    double maxConfidence = 0.0;
+
+    results.forEach((emotion, confidence) {
+      if (confidence > maxConfidence) {
+        maxConfidence = confidence;
+        maxEmotion = emotion;
+      }
+    });
+
+    return maxEmotion;
   }
-}
+
+  void dispose() {
+    _interpreter.close();
+  }
+}
\ No newline at end of file
Index: lib/services/new_feature_extractor.dart
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>import 'dart:math' as math;\n\nimport '../models/sensor_data.dart';\n\nclass FeatureExtractor {\n  static Map<String, double> extractFeatures(\n      List<SensorData> dataWindow, {\n        double samplingRate = 25.0, // Configurable sampling rate\n      }) {\n    Map<String, double> features = {};\n\n    List<double> ppg = dataWindow.where((d) => d.ppg != null).map((d) => d.ppg!).toList();\n    List<double> gsr = dataWindow.where((d) => d.grs != null).map((d) => d.grs!).toList();\n\n    if (ppg.isNotEmpty) {\n      List<int> peaks = findPeaks(ppg, samplingRate: samplingRate);\n      if (peaks.length >= 2) {\n        double heartRate = calculateHeartRate(peaks, ppg.length, samplingRate);\n        features['hr'] = heartRate;\n\n        if (peaks.length >= 3) {\n          double hrv = calculateRMSSD(peaks, samplingRate);\n          features['hrv'] = hrv;\n        }\n      }\n      features['signal_quality'] = calculateSignalQuality(ppg);\n      features['pulse_amplitude'] = calculatePulseAmplitude(ppg, peaks, samplingRate);\n    }\n\n    if (gsr.isNotEmpty) {\n      features['gsr_mean'] = calculateGSRMean(gsr);\n      features['gsr_std'] = calculateGSRStd(gsr);\n      features['gsr_slope'] = calculateGSRSlope(gsr, samplingRate);\n      features['gsr_peak_count'] = calculateGSRPeakCount(gsr, samplingRate).toDouble();\n    }\n\n    return features;\n  }\n\n  // GSR Feature Calculation Methods\n\n  static double calculateGSRMean(List<double> gsr) {\n    if (gsr.isEmpty) return 0.0;\n    return gsr.reduce((a, b) => a + b) / gsr.length;\n  }\n\n  static double calculateGSRStd(List<double> gsr) {\n    if (gsr.isEmpty) return 0.0;\n\n    double mean = calculateGSRMean(gsr);\n    double variance = gsr.map((x) => (x - mean) * (x - mean)).reduce((a, b) => a + b) / (gsr.length - 1);\n    return math.sqrt(variance);\n  }\n\n  static double calculateGSRSlope(List<double> gsr, double samplingRate) {\n    if (gsr.length < 2) return 0.0;\n\n    // Linear regression to find slope (trend)\n    double n = gsr.length.toDouble();\n    double sumX = 0, sumY = 0, sumXY = 0, sumX2 = 0;\n\n    for (int i = 0; i < gsr.length; i++) {\n      double x = i / samplingRate; // Time in seconds\n      double y = gsr[i];\n\n      sumX += x;\n      sumY += y;\n      sumXY += x * y;\n      sumX2 += x * x;\n    }\n\n    // Calculate slope using least squares formula\n    double slope = (n * sumXY - sumX * sumY) / (n * sumX2 - sumX * sumX);\n    return slope.clamp(-1000.0, 1000.0); // Clamp to prevent extreme values\n  }\n\n  static int calculateGSRPeakCount(List<double> gsr, double samplingRate) {\n    if (gsr.length < 3) return 0;\n\n    // Find SCRs (Skin Conductance Responses) - rapid increases in GSR\n    List<double> smoothed = [];\n    int windowSize = (samplingRate * 0.5).round(); // 0.5 second smoothing window\n\n    // Apply moving average smoothing\n    for (int i = 0; i < gsr.length; i++) {\n      int start = (i - windowSize ~/ 2).clamp(0, gsr.length - 1);\n      int end = (i + windowSize ~/ 2 + 1).clamp(0, gsr.length);\n      double avg = gsr.sublist(start, end).reduce((a, b) => a + b) / (end - start);\n      smoothed.add(avg);\n    }\n\n    // Calculate first derivative (rate of change)\n    List<double> derivative = [];\n    for (int i = 1; i < smoothed.length; i++) {\n      derivative.add((smoothed[i] - smoothed[i - 1]) * samplingRate);\n    }\n\n    // Find peaks in the derivative (rapid increases)\n    int peakCount = 0;\n    double threshold = calculateGSRStd(derivative) * 1.5; // Adaptive threshold\n    int minDistance = (samplingRate * 2.0).round(); // Minimum 2 seconds between peaks\n    int lastPeak = -minDistance;\n\n    for (int i = 1; i < derivative.length - 1; i++) {\n      if (derivative[i] > derivative[i - 1] &&\n          derivative[i] > derivative[i + 1] &&\n          derivative[i] > threshold &&\n          i - lastPeak > minDistance) {\n        peakCount++;\n        lastPeak = i;\n      }\n    }\n\n    return peakCount;\n  }\n\n  // Find peaks in PPG signal using adaptive threshold and smoothing\n  static List<int> findPeaks(List<double> signal, {required double samplingRate}) {\n    List<int> peaks = [];\n    int minDistance = (samplingRate * 0.3).round(); // Minimum 300ms between peaks (adjustable)\n\n    // Simple moving average to smooth signal\n    List<double> smoothed = [];\n    int windowSize = 5; // Smoothing window\n    for (int i = 0; i < signal.length; i++) {\n      int start = (i - windowSize ~/ 2).clamp(0, signal.length - 1);\n      int end = (i + windowSize ~/ 2 + 1).clamp(0, signal.length);\n      double avg = signal.sublist(start, end).reduce((a, b) => a + b) / (end - start);\n      smoothed.add(avg);\n    }\n\n    // Calculate adaptive threshold\n    double mean = smoothed.reduce((a, b) => a + b) / smoothed.length;\n    double maxVal = smoothed.reduce((a, b) => a > b ? a : b);\n    double threshold = mean + (maxVal - mean) * 0.3;\n\n    for (int i = 1; i < smoothed.length - 1; i++) {\n      // Check if current point is a local maximum above threshold\n      if (smoothed[i] > smoothed[i - 1] &&\n          smoothed[i] > smoothed[i + 1] &&\n          smoothed[i] > threshold) {\n        // Ensure minimum distance from last peak\n        if (peaks.isEmpty || i - peaks.last > minDistance) {\n          peaks.add(i);\n        }\n      }\n    }\n\n    return peaks;\n  }\n\n  static double calculateHeartRate(List<int> peaks, int totalSamples, double samplingRate) {\n    if (peaks.length < 2) return 0.0;\n\n    // Calculate average interval between peaks in seconds\n    double totalInterval = 0.0;\n    for (int i = 1; i < peaks.length; i++) {\n      totalInterval += (peaks[i] - peaks[i - 1]) / samplingRate;\n    }\n\n    double avgInterval = totalInterval / (peaks.length - 1);\n\n    // Convert to beats per minute, clamp to reasonable range (30-200 BPM)\n    double heartRate = 60.0 / avgInterval;\n    return heartRate.clamp(30.0, 200.0);\n  }\n\n  static double calculateRMSSD(List<int> peaks, double samplingRate) {\n    if (peaks.length < 3) return 0.0;\n\n    List<double> intervals = [];\n\n    // Convert peak indices to time intervals (in milliseconds)\n    for (int i = 1; i < peaks.length; i++) {\n      double interval = (peaks[i] - peaks[i - 1]) / samplingRate * 1000;\n      intervals.add(interval);\n    }\n\n    // Calculate successive differences\n    double sumSquaredDiffs = 0.0;\n    for (int i = 1; i < intervals.length; i++) {\n      double diff = intervals[i] - intervals[i - 1];\n      sumSquaredDiffs += diff * diff;\n    }\n\n    // Return RMSSD, clamp to prevent outliers\n    double rmssd = math.sqrt(sumSquaredDiffs / (intervals.length - 1));\n    return rmssd.clamp(0.0, 1000.0); // Reasonable range for RMSSD\n  }\n\n\n  static double calculateSignalQuality(List<double> signal) {\n    if (signal.isEmpty) return 0.0;\n\n    // Calculate SNR with smoothing\n    double mean = signal.reduce((a, b) => a + b) / signal.length;\n    double variance = signal.map((x) => (x - mean) * (x - mean)).reduce((a, b) => a + b) / (signal.length - 1);\n    double std = math.sqrt(variance);\n\n    // Return signal-to-noise ratio (higher is better), clamped to prevent extreme values\n    return std > 0 ? (mean.abs() / std).clamp(0.0, 100.0) : 0.0;\n  }\n\n  static double calculatePulseAmplitude(List<double> signal, List<int> peaks, double samplingRate) {\n    if (peaks.isEmpty || signal.isEmpty) return 0.0;\n\n    double totalAmplitude = 0.0;\n    int validPeaks = 0;\n    int windowSize = (samplingRate * 0.4).round(); // Window ~400ms around peak\n\n    for (int peak in peaks) {\n      if (peak > windowSize && peak < signal.length - windowSize) {\n        // Find local minimum in window around peak\n        double minVal = signal.sublist(peak - windowSize, peak + windowSize).reduce((a, b) => a < b ? a : b);\n        double amplitude = signal[peak] - minVal;\n        if (amplitude > 0) { // Ensure positive amplitude\n          totalAmplitude += amplitude;\n          validPeaks++;\n        }\n      }\n    }\n\n    return validPeaks > 0 ? totalAmplitude / validPeaks : 0.0;\n  }\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/lib/services/new_feature_extractor.dart b/lib/services/new_feature_extractor.dart
--- a/lib/services/new_feature_extractor.dart	(revision 764b7528e9142b5ed946d9cafada38e8141f9a42)
+++ b/lib/services/new_feature_extractor.dart	(date 1757663056765)
@@ -2,10 +2,10 @@
 
 import '../models/sensor_data.dart';
 
-class FeatureExtractor {
+class NewFeatureExtractor {
   static Map<String, double> extractFeatures(
       List<SensorData> dataWindow, {
-        double samplingRate = 25.0, // Configurable sampling rate
+        double samplingRate = 128.0, // Configurable sampling rate
       }) {
     Map<String, double> features = {};
 
Index: lib/widgets/charts/ppg_chart.dart
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>import \"package:app/models/sensor_data.dart\";\nimport \"package:fl_chart/fl_chart.dart\";\nimport \"package:flutter/material.dart\";\n\nclass PpgChart extends StatelessWidget {\n  const PpgChart({\n    super.key,\n    required this.sensorDataList,\n    this.windowSize = 10,\n  });\n  final List<SensorData> sensorDataList;\n  final double windowSize;\n\n  @override\n  Widget build(BuildContext context) {\n    final validData =\n        sensorDataList\n            .where(\n              (data) =>\n                  data.timeStamp != null &&\n                  data.ppg != null &&\n                  data.timeStamp!.isFinite &&\n                  data.ppg!.isFinite,\n            )\n            .toList();\n\n    List<FlSpot> spots = [];\n\n    if (validData.isNotEmpty) {\n      final latestTimeStamp = sensorDataList.last.timeStamp!;\n      final oldestTimeStamp = sensorDataList.first.timeStamp!;\n      final timeStampRage = latestTimeStamp - oldestTimeStamp;\n\n      for (int i = 0; i < validData.length; i++) {\n        final e = validData[i];\n        final relativeTimeStamp =\n            (e.timeStamp! - oldestTimeStamp) / timeStampRage * windowSize;\n        spots.add(FlSpot(relativeTimeStamp, e.ppg!));\n      }\n    }\n\n    double minY = 0.0;\n    double maxY = 0.0;\n\n    if (spots.isNotEmpty) {\n      minY = spots.map((e) => e.y).reduce((a, b) => a < b ? a : b);\n      maxY = spots\n          .map((e) => e.y)\n          .reduce((a, b) => a > b ? a : b); //=> means return\n    }\n\n    return Card(\n      elevation: 5.0,\n      margin: EdgeInsets.symmetric(horizontal: 16.0, vertical: 8.0),\n      child: Padding(\n        padding: const EdgeInsets.all(12.0),\n        child: Column(\n          children: [\n            Text(\n              'PPG',\n              style: TextStyle(fontSize: 18.0, fontWeight: FontWeight.w600),\n            ),\n            Expanded(\n              child: LineChart(\n                duration: Duration(microseconds: 100),\n                LineChartData(\n                  minX: 0.0,\n                  maxX: windowSize,\n                  minY: minY,\n                  maxY: maxY,\n                  borderData: FlBorderData(\n                    show: false,\n                    border: Border(\n                      bottom: BorderSide(color: Colors.black, width: 1.0),\n                      left: BorderSide(color: Colors.black, width: 1.0),\n                    ),\n                  ),\n                  titlesData: FlTitlesData(\n                    topTitles: AxisTitles(\n                      sideTitles: SideTitles(showTitles: false),\n                    ),\n                    rightTitles: AxisTitles(\n                      sideTitles: SideTitles(showTitles: false),\n                    ),\n                    bottomTitles: AxisTitles(\n                      sideTitles: SideTitles(\n                        showTitles: true,\n                        interval: windowSize / 2,\n                        getTitlesWidget: (value, meta) {\n                          return Text(\n                            '${value.toStringAsFixed(1)}s',\n                            style: const TextStyle(fontSize: 10),\n                          );\n                        },\n                      ),\n                    ),\n                    leftTitles: AxisTitles(\n                      sideTitles: SideTitles(\n                        showTitles: true,\n                        interval: 2,\n                        getTitlesWidget: (value, meta) {\n                          return Text(\n                            value.toStringAsFixed(1),\n                            style: const TextStyle(fontSize: 10),\n                          );\n                        },\n                      ),\n                    ),\n                  ),\n                  gridData: FlGridData(\n                    show: true,\n                    drawHorizontalLine: true,\n                    drawVerticalLine: false,\n                    horizontalInterval: 4,\n                    //verticalInterval: (maxY - minY)/2\n                  ),\n                  lineBarsData: [\n                    LineChartBarData(\n                      spots: spots,\n                      dotData: FlDotData(show: false),\n                      barWidth: 2,\n                      color: Colors.blue,\n                    ),\n                  ],\n                ),\n              ),\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n}\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/lib/widgets/charts/ppg_chart.dart b/lib/widgets/charts/ppg_chart.dart
--- a/lib/widgets/charts/ppg_chart.dart	(revision 764b7528e9142b5ed946d9cafada38e8141f9a42)
+++ b/lib/widgets/charts/ppg_chart.dart	(date 1757664054039)
@@ -40,7 +40,7 @@
     }
 
     double minY = 0.0;
-    double maxY = 0.0;
+    double maxY = 10.0;
 
     if (spots.isNotEmpty) {
       minY = spots.map((e) => e.y).reduce((a, b) => a < b ? a : b);
@@ -69,7 +69,7 @@
                   minY: minY,
                   maxY: maxY,
                   borderData: FlBorderData(
-                    show: false,
+                    show: true,
                     border: Border(
                       bottom: BorderSide(color: Colors.black, width: 1.0),
                       left: BorderSide(color: Colors.black, width: 1.0),
@@ -97,7 +97,7 @@
                     leftTitles: AxisTitles(
                       sideTitles: SideTitles(
                         showTitles: true,
-                        interval: 2,
+                        interval: ((maxY - minY) /2) == 0 ? 2 : (maxY - minY) /2,
                         getTitlesWidget: (value, meta) {
                           return Text(
                             value.toStringAsFixed(1),
@@ -111,7 +111,7 @@
                     show: true,
                     drawHorizontalLine: true,
                     drawVerticalLine: false,
-                    horizontalInterval: 4,
+                    horizontalInterval: ((maxY - minY) /2) == 0 ? 2 : (maxY - minY) /2,
                     //verticalInterval: (maxY - minY)/2
                   ),
                   lineBarsData: [
Index: lib/services/emotion_interpretor.dart
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/lib/services/emotion_interpretor.dart b/lib/services/emotion_interpretor.dart
new file mode 100644
--- /dev/null	(date 1757664445246)
+++ b/lib/services/emotion_interpretor.dart	(date 1757664445246)
@@ -0,0 +1,58 @@
+import 'dart:convert';
+import 'package:flutter/services.dart';
+import 'package:tflite_flutter/tflite_flutter.dart';
+
+class EmotionInterpretor {
+  Interpreter? _interpreter;
+  Map<String, dynamic>? _scalerParams;
+  final int numFeatures;
+
+  EmotionInterpretor({this.numFeatures = 8});
+
+  Future<void> loadModelAndScalers() async {
+    // Load the TFLite model
+    _interpreter = await Interpreter.fromAsset('assets/emotion_model.tflite');
+
+    // Load the scaler parameters
+    final scalerJson = await rootBundle.loadString('assets/scaler_params.json');
+    _scalerParams = json.decode(scalerJson);
+  }
+
+  bool get isReady => _interpreter != null && _scalerParams != null;
+
+  List<double> predict(List<double> rawInput) {
+    if (!isReady) {
+      throw Exception("Model or scaler not loaded");
+    }
+
+    // 1. Preprocess input
+    final featureMean = List<double>.from(_scalerParams!['feature_scaler']['mean']);
+    final featureScale = List<double>.from(_scalerParams!['feature_scaler']['scale']);
+
+    List<double> scaledInput = List<double>.filled(numFeatures, 0);
+    for (int i = 0; i < numFeatures; i++) {
+      scaledInput[i] = (rawInput[i] - featureMean[i]) / featureScale[i];
+    }
+
+    final input = [scaledInput];
+    final output = List.filled(1 * 2, 0.0).reshape([1, 2]);
+
+    // 2. Run inference
+    _interpreter!.run(input, output);
+
+    // 3. Postprocess output
+    final labelMean = List<double>.from(_scalerParams!['label_scaler']['mean']);
+    final labelScale = List<double>.from(_scalerParams!['label_scaler']['scale']);
+
+    List<double> finalOutput = List<double>.filled(2, 0);
+    for (int i = 0; i < 2; i++) {
+      finalOutput[i] = (output[0][i] * labelScale[i]) + labelMean[i];
+    }
+
+    return finalOutput;
+  }
+
+  void dispose() {
+    _interpreter?.close();
+  }
+}
Index: lib/models/sensor_data.dart
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>import 'package:app/data/collections/sensor_data_collection.dart';\n\nclass SensorData{\n  \n  final double? timeStamp;\n  final double? accelX;\n  final double? grs;\n  final double? ppg;  \n  final double? emg;\n\n  const SensorData({this.timeStamp, this.accelX, this.grs, this.ppg, this.emg});\n  SensorDataCollection toCollection() {\n    return SensorDataCollection(timeStamp: timeStamp, accelX: accelX, grs: grs);\n  }\n\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/lib/models/sensor_data.dart b/lib/models/sensor_data.dart
--- a/lib/models/sensor_data.dart	(revision 764b7528e9142b5ed946d9cafada38e8141f9a42)
+++ b/lib/models/sensor_data.dart	(date 1757663810242)
@@ -13,4 +13,9 @@
     return SensorDataCollection(timeStamp: timeStamp, accelX: accelX, grs: grs);
   }
 
+  @override
+  String toString() {
+    return 'SensorData{timeStamp: $timeStamp, accelX: $accelX, grs: $grs, ppg: $ppg, emg: $emg}';
+  }
+
 }
\ No newline at end of file
Index: lib/main.dart
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>import 'package:app/data/database/isar_database.dart';\nimport 'package:flutter/material.dart';\nimport 'package:isar/isar.dart';\nimport 'pages/home_page.dart'; // HomePage for Bluetooth connection\n\nlate Isar isar; // Late for initialization\n\nvoid main() async {\n  WidgetsFlutterBinding.ensureInitialized();\n  isar = await IsarDatabase.createIsarDatabase(); //it takes time to create the database, thats why we dont put before the class\n  runApp(const MyApp());\n}\n\nclass MyApp extends StatelessWidget {\n  const MyApp({super.key});\n\n  @override\n  Widget build(BuildContext context) {\n    return MaterialApp(\n      title: 'Emotion Sensor App', // App name (visible to users)\n      theme: ThemeData(\n        primarySwatch: Colors.blue, // Primary color\n      ),\n      home: const HomePage(), // Main screen\n      debugShowCheckedModeBanner: false, // Remove debug banner\n    );\n  }\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/lib/main.dart b/lib/main.dart
--- a/lib/main.dart	(revision 764b7528e9142b5ed946d9cafada38e8141f9a42)
+++ b/lib/main.dart	(date 1758282758236)
@@ -1,12 +1,17 @@
 import 'package:app/data/database/isar_database.dart';
+import 'package:app/pages/camera_page.dart';
+import 'package:app/pages/camera_screen.dart';
+import 'package:camera/camera.dart';
 import 'package:flutter/material.dart';
 import 'package:isar/isar.dart';
-import 'pages/home_page.dart'; // HomePage for Bluetooth connection
 
+
+late List<CameraDescription> cameras;
 late Isar isar; // Late for initialization
 
 void main() async {
   WidgetsFlutterBinding.ensureInitialized();
+  cameras = await availableCameras(); // Fetch available cameras
   isar = await IsarDatabase.createIsarDatabase(); //it takes time to create the database, thats why we dont put before the class
   runApp(const MyApp());
 }
@@ -21,7 +26,7 @@
       theme: ThemeData(
         primarySwatch: Colors.blue, // Primary color
       ),
-      home: const HomePage(), // Main screen
+      home: const CameraPage(), // Main screen
       debugShowCheckedModeBanner: false, // Remove debug banner
     );
   }
Index: lib/widgets/charts/accel_chart.dart
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>import \"package:app/models/sensor_data.dart\";\nimport \"package:fl_chart/fl_chart.dart\";\nimport \"package:flutter/material.dart\";\n\nclass AccelerometerChart extends StatelessWidget {\n  const AccelerometerChart({super.key, required this.sensorDataList, this.windowSize = 10});\n  final List<SensorData> sensorDataList;\n  final double windowSize;\n\n  @override\n  Widget build(BuildContext context) {\n    final validData =\n        sensorDataList\n            .where(\n              (data) =>\n                  data.timeStamp != null &&\n                  data.accelX != null &&\n                  data.timeStamp!.isFinite &&\n                  data.accelX!.isFinite,\n            )\n            .toList();\n\n    List<FlSpot> spots = [];\n\n    if (validData.isNotEmpty) {\n      final latestTimeStamp = sensorDataList.last.timeStamp!;\n      final oldestTimeStamp = sensorDataList.first.timeStamp!;\n      final timeStampRage = latestTimeStamp - oldestTimeStamp;\n\n      for (int i = 0; i < validData.length; i++) {\n        final e = validData[i];\n        final relativeTimeStamp =\n            (e.timeStamp! - oldestTimeStamp) / timeStampRage * windowSize;\n        spots.add(FlSpot(relativeTimeStamp, e.accelX!));\n      }\n    }\n\n    double minY = 0.0;\n    double maxY = 0.0;\n\n    if(spots.isNotEmpty){\n      minY = spots.map((e)=> e.y ).reduce((a,b) => a<b ? a:b);\n      maxY = spots.map((e)=> e.y ).reduce((a,b) => a>b ? a:b); //=> means return\n    }\n\n    return Card\n    (\n      elevation: 5,\n      margin: EdgeInsets.symmetric(horizontal: 16.0, vertical: 8.0),\n      child: Padding(\n        padding: const EdgeInsets.all(12.0),\n        child: Column(\n          children: [\n            Text(\n              'Accelerometer',\n              style: TextStyle(\n                fontSize: 18.0,\n                fontWeight: FontWeight.w600,\n\n              ),\n            ),\n            Expanded(\n              child: LineChart(\n                duration: Duration(microseconds: 100),\n                LineChartData(\n                  minX: 0.0,\n                  maxX: windowSize,\n                  maxY: maxY,\n                  minY: minY,\n                  borderData: FlBorderData(show: true,\n                  border: Border(\n                    bottom: BorderSide(color: Colors.black, width: 1.0),\n                    left: BorderSide(color: Colors.black, width: 1.0),\n                  )\n                  ),\n                  titlesData: FlTitlesData(\n                    topTitles: AxisTitles(sideTitles: SideTitles(showTitles: false)),\n                    rightTitles: AxisTitles(sideTitles: SideTitles(showTitles: false)),\n                    bottomTitles: AxisTitles(\n                      sideTitles: SideTitles(\n                        showTitles: true,\n                        interval: windowSize/2,\n                        getTitlesWidget: (value, meta) {\n                          return Text(\n                            '${value.toStringAsFixed(1)}s',\n                            style: const TextStyle(fontSize: 10),\n                          );\n                        },\n                      ),\n                    ),\n                    leftTitles: AxisTitles(\n                      sideTitles: SideTitles(\n                        showTitles: true,\n                        interval: (maxY - minY)/2,\n                        getTitlesWidget: (value, meta) {\n                          return Text(\n                            value.toStringAsFixed(1),\n                            style: const TextStyle(fontSize: 10),\n                          );\n                        },\n                      ),\n                    ),\n                  ),\n                  gridData: FlGridData(\n                    show: true,\n                    drawHorizontalLine: true,\n                    drawVerticalLine: false,\n                    horizontalInterval: (maxY - minY)/2,\n                    //verticalInterval: (maxY - minY)/2\n                  ),\n                  lineBarsData: [\n                    LineChartBarData(\n                      spots: spots,\n                      dotData: FlDotData(show: false),\n                      barWidth: 1,\n                      color: Colors.blue,\n                    ),\n                  ],\n                ),\n              ),\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n}\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/lib/widgets/charts/accel_chart.dart b/lib/widgets/charts/accel_chart.dart
--- a/lib/widgets/charts/accel_chart.dart	(revision 764b7528e9142b5ed946d9cafada38e8141f9a42)
+++ b/lib/widgets/charts/accel_chart.dart	(date 1756994104432)
@@ -36,7 +36,7 @@
     }
 
     double minY = 0.0;
-    double maxY = 0.0;
+    double maxY = 10.0;
 
     if(spots.isNotEmpty){
       minY = spots.map((e)=> e.y ).reduce((a,b) => a<b ? a:b);
@@ -91,7 +91,7 @@
                     leftTitles: AxisTitles(
                       sideTitles: SideTitles(
                         showTitles: true,
-                        interval: (maxY - minY)/2,
+                        interval: ((maxY - minY) /2) == 0 ? 1 : (maxY - minY) /2,
                         getTitlesWidget: (value, meta) {
                           return Text(
                             value.toStringAsFixed(1),
@@ -105,7 +105,7 @@
                     show: true,
                     drawHorizontalLine: true,
                     drawVerticalLine: false,
-                    horizontalInterval: (maxY - minY)/2,
+                    horizontalInterval: ((maxY - minY) /2) == 0 ? 1 : (maxY - minY) /2,
                     //verticalInterval: (maxY - minY)/2
                   ),
                   lineBarsData: [
Index: assets/scaler_params.json
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/assets/scaler_params.json b/assets/scaler_params.json
new file mode 100644
--- /dev/null	(date 1757077487893)
+++ b/assets/scaler_params.json	(date 1757077487893)
@@ -0,0 +1,1 @@
+{"feature_scaler": {"mean": [72.48167518200276, 704.4894962848249, 0.4751697251814443, 30.166978535274076, -975.7930133704336, 1560.883579185931, -14.858059305956965, 16.840625], "scale": [29.335156981335786, 309.89050437871225, 0.7253358921152541, 83.3026965732663, 2497.8692078178724, 1505.2646946882185, 48.07110980491257, 4.131007699021511]}, "label_scaler": {"mean": [3.465484375, 3.7300703124999997], "scale": [2.0088783989158876, 1.9793196616972086]}}
\ No newline at end of file
Index: lib/widgets/charts/grs_chart.dart
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>import \"package:app/models/sensor_data.dart\";\nimport \"package:fl_chart/fl_chart.dart\";\nimport \"package:flutter/material.dart\";\n\nclass GrsChart extends StatelessWidget {\n  const GrsChart({\n    super.key,\n    required this.sensorDataList,\n    this.windowSize = 10,\n  });\n  final List<SensorData> sensorDataList;\n  final double windowSize;\n\n  @override\n  Widget build(BuildContext context) {\n    final validData =\n        sensorDataList\n            .where(\n              (data) =>\n                  data.timeStamp != null &&\n                  data.grs != null &&\n                  data.timeStamp!.isFinite &&\n                  data.grs!.isFinite,\n            )\n            .toList();\n\n    List<FlSpot> spots = [];\n\n    if (validData.isNotEmpty) {\n      final latestTimeStamp = sensorDataList.last.timeStamp!;\n      final oldestTimeStamp = sensorDataList.first.timeStamp!;\n      final timeStampRage = latestTimeStamp - oldestTimeStamp;\n\n      for (int i = 0; i < validData.length; i++) {\n        final e = validData[i];\n        final relativeTimeStamp =\n            (e.timeStamp! - oldestTimeStamp) / timeStampRage * windowSize;\n        spots.add(FlSpot(relativeTimeStamp, e.grs!));\n      }\n    }\n\n    double minY = 0.0;\n    double maxY = 0.0;\n\n    if (spots.isNotEmpty) {\n      minY = spots.map((e) => e.y).reduce((a, b) => a < b ? a : b);\n      maxY = spots\n          .map((e) => e.y)\n          .reduce((a, b) => a > b ? a : b); //=> means return\n    }\n\n    return Card(\n      elevation: 5.0,\n      margin: EdgeInsets.symmetric(horizontal: 16.0, vertical: 8.0),\n      child: Padding(\n        padding: const EdgeInsets.all(12.0),\n        child: Column(\n          children: [\n             Text(\n                'GRS',\n                style: TextStyle(\n                  fontSize: 18.0,\n                  fontWeight: FontWeight.w600,\n        \n                ),\n              ),\n            Expanded(\n              child: LineChart(\n                duration: Duration(microseconds: 100),\n                LineChartData(\n                  minX: 0.0,\n                  maxX: windowSize,\n                  maxY: maxY,\n                  minY: minY,\n                  borderData: FlBorderData(\n                    show: false,\n                    border: Border(\n                      bottom: BorderSide(color: Colors.black, width: 1.0),\n                      left: BorderSide(color: Colors.black, width: 1.0),\n                    ),\n                  ),\n                  titlesData: FlTitlesData(\n                    topTitles: AxisTitles(sideTitles: SideTitles(showTitles: false)),\n                    rightTitles: AxisTitles(sideTitles: SideTitles(showTitles: false)),\n                    bottomTitles: AxisTitles(\n                      sideTitles: SideTitles(\n                        showTitles: true,\n                        interval: windowSize / 2,\n                        getTitlesWidget: (value, meta) {\n                          return Text(\n                            '${value.toStringAsFixed(1)}s',\n                            style: const TextStyle(fontSize: 10),\n                          );\n                        },\n                      ),\n                    ),\n                    leftTitles: AxisTitles(\n                      sideTitles: SideTitles(\n                        showTitles: true,\n                        interval: (maxY - minY) / 2,\n                        getTitlesWidget: (value, meta) {\n                          return Text(\n                            value.toStringAsFixed(1),\n                            style: const TextStyle(fontSize: 10),\n                          );\n                        },\n                      ),\n                    ),\n                  ),\n                  gridData: FlGridData(\n                    show: true,\n                    drawHorizontalLine: true,\n                    drawVerticalLine: false,\n                    horizontalInterval: (maxY - minY) / 4,\n                    //verticalInterval: (maxY - minY)/2\n                  ),\n                  lineBarsData: [\n                    LineChartBarData(\n                      spots: spots,\n                      dotData: FlDotData(show: false),\n                      barWidth: 2,\n                      color: Colors.blue,\n                    ),\n                  ],\n                ),\n              ),\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n}\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/lib/widgets/charts/grs_chart.dart b/lib/widgets/charts/grs_chart.dart
--- a/lib/widgets/charts/grs_chart.dart	(revision 764b7528e9142b5ed946d9cafada38e8141f9a42)
+++ b/lib/widgets/charts/grs_chart.dart	(date 1757664054050)
@@ -40,7 +40,7 @@
     }
 
     double minY = 0.0;
-    double maxY = 0.0;
+    double maxY = 10.0;
 
     if (spots.isNotEmpty) {
       minY = spots.map((e) => e.y).reduce((a, b) => a < b ? a : b);
@@ -97,7 +97,7 @@
                     leftTitles: AxisTitles(
                       sideTitles: SideTitles(
                         showTitles: true,
-                        interval: (maxY - minY) / 2,
+                        interval: ((maxY - minY) /2) == 0 ? 1 : (maxY - minY) /2,
                         getTitlesWidget: (value, meta) {
                           return Text(
                             value.toStringAsFixed(1),
@@ -111,7 +111,7 @@
                     show: true,
                     drawHorizontalLine: true,
                     drawVerticalLine: false,
-                    horizontalInterval: (maxY - minY) / 4,
+                    horizontalInterval: ((maxY - minY) /2) == 0 ? 1 : (maxY - minY) /2,
                     //verticalInterval: (maxY - minY)/2
                   ),
                   lineBarsData: [
Index: lib/pages/camera_page.dart
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/lib/pages/camera_page.dart b/lib/pages/camera_page.dart
new file mode 100644
--- /dev/null	(date 1758283533962)
+++ b/lib/pages/camera_page.dart	(date 1758283533962)
@@ -0,0 +1,217 @@
+// camera_page.dart
+import 'dart:async';
+
+import 'package:app/main.dart'; // Or your own main.dart path
+import 'package:camera/camera.dart';
+import 'package:flutter/material.dart';
+import 'package:image/image.dart' as img;
+
+import '../services/emotion_detector.dart';
+
+class CameraPage extends StatefulWidget {
+  const CameraPage({super.key});
+
+  @override
+  State<CameraPage> createState() => _CameraPageState();
+}
+
+class _CameraPageState extends State<CameraPage> {
+  CameraController? _cameraController;
+  bool _isCameraInitialized = false;
+  bool _isDetecting = false;
+
+  final EmotionDetector _emotionDetector = EmotionDetector();
+  Map<String, double> _emotionResults = {};
+  String _predictedEmotion = '';
+  Timer? _detectionTimer;
+
+  @override
+  void initState() {
+    super.initState();
+    _initializeCamera();
+    _loadModel();
+  }
+
+  @override
+  void dispose() {
+    _cameraController?.stopImageStream();
+    _cameraController?.dispose();
+    _emotionDetector.dispose();
+    super.dispose();
+  }
+
+  Future<void> _loadModel() async {
+    await _emotionDetector.loadModel();
+    if (mounted) {
+      setState(() {});
+    }
+  }
+
+  Future<void> _initializeCamera() async {
+    // Use the front camera for selfies
+    final frontCamera = cameras.firstWhere(
+      (camera) => camera.lensDirection == CameraLensDirection.front,
+      orElse: () => cameras[0], // Fallback to the first camera
+    );
+
+    _cameraController = CameraController(
+      frontCamera,
+      ResolutionPreset.medium,
+      enableAudio: false, // Disabling audio can improve performance
+    );
+
+    try {
+      await _cameraController!.initialize();
+      _startDetectionStream();
+      setState(() {
+        _isCameraInitialized = true;
+      });
+    } on CameraException catch (e) {
+      _showSnackBar('Camera error: ${e.code}', isError: true);
+    } catch (e) {
+      _showSnackBar('An unexpected error occurred: $e', isError: true);
+    }
+  }
+
+  void _startDetectionStream() {
+    if (_cameraController == null) return;
+
+    _cameraController!.startImageStream((CameraImage cameraImage) async {
+      // If a frame is already being processed, skip this one.
+      if (_isDetecting) {
+        return;
+      }
+      debugPrint("Processing frame for emotion detection...");
+
+      setState(() {
+        _isDetecting = true;
+      });
+
+      // Convert the CameraImage to a format our model can use
+      final image = await _convertYUV420toImage(cameraImage);
+
+      // Perform emotion detection
+      final results = await _emotionDetector.detectEmotion(image);
+      final predicted = _emotionDetector.getPredictedEmotion(results);
+
+      // Update the UI with the results
+      if (mounted) {
+        setState(() {
+          _emotionResults = results;
+          _predictedEmotion =
+              predicted.isNotEmpty ? predicted : 'No face detected';
+        });
+      }
+
+      // Allow the next frame to be processed.
+      setState(() {
+        _isDetecting = false;
+      });
+    });
+  }
+
+  void _showSnackBar(String message, {bool isError = false}) {
+    ScaffoldMessenger.of(context).showSnackBar(
+      SnackBar(
+        content: Text(message),
+        backgroundColor: isError ? Colors.redAccent : Colors.green,
+      ),
+    );
+  }
+
+  img.Image _convertYUV420toImage(CameraImage image) {
+    final int width = image.width;
+    final int height = image.height;
+
+    // Create a new RGB image
+    final img.Image rgbImage = img.Image(width: width, height: height);
+
+    final yPlane = image.planes[0].bytes;
+    final uPlane = image.planes[1].bytes;
+    final vPlane = image.planes[2].bytes;
+
+    final yRowStride = image.planes[0].bytesPerRow;
+    final uvRowStride = image.planes[1].bytesPerRow;
+    final uvPixelStride = image.planes[1].bytesPerPixel!;
+
+    for (int y = 0; y < height; y++) {
+      for (int x = 0; x < width; x++) {
+        final int yIndex = y * yRowStride + x;
+
+        // Calculate the index for the U and V planes
+        final int uvIndex = (y ~/ 2) * uvRowStride + (x ~/ 2) * uvPixelStride;
+
+        // Get the Y, U, and V values
+        final int yValue = yPlane[yIndex];
+        final int uValue = uPlane[uvIndex];
+        final int vValue = vPlane[uvIndex];
+
+        // Convert YUV to RGB using standard formula
+        int r = (yValue + 1.402 * (vValue - 128)).round();
+        int g = (yValue - 0.344136 * (uValue - 128) - 0.714136 * (vValue - 128)).round();
+        int b = (yValue + 1.772 * (uValue - 128)).round();
+
+        // Clamp values to the 0-255 range and set the pixel
+        rgbImage.setPixelRgb(
+          x,
+          y,
+          r.clamp(0, 255),
+          g.clamp(0, 255),
+          b.clamp(0, 255),
+        );
+      }
+    }
+
+    return rgbImage;
+  }
+
+  @override
+  Widget build(BuildContext context) {
+    // Show a loading indicator while the camera is initializing
+    if (_cameraController == null || !_cameraController!.value.isInitialized) {
+      return const Scaffold(body: Center(child: CircularProgressIndicator()));
+    }
+
+    return Scaffold(
+      appBar: AppBar(title: const Text('Emotion Detector')),
+      body: Column(
+        children: [
+          // The camera preview
+          Container(
+            padding: EdgeInsets.all(16),
+            decoration: BoxDecoration(borderRadius: BorderRadius.circular(16)),
+            child:
+                _isCameraInitialized
+                    ? CameraPreview(_cameraController!)
+                    : Center(child: CircularProgressIndicator()),
+          ),
+          const SizedBox(height: 16),
+          // Display the prediction on top of the camera preview
+          Text(
+            _predictedEmotion,
+            textAlign: TextAlign.center,
+            style: const TextStyle(
+              color: Colors.black,
+              fontSize: 24,
+              fontWeight: FontWeight.bold,
+            ),
+          ),
+          const SizedBox(height: 16),
+          // Display detailed emotion probabilities
+          Expanded(
+            child: ListView(
+              children:
+                  _emotionResults.entries.map((entry) {
+                    return ListTile(
+                      title: Text(
+                        '${entry.key}: ${(entry.value * 100).toStringAsFixed(2)}%',
+                      ),
+                    );
+                  }).toList(),
+            ),
+          ),
+        ],
+      ),
+    );
+  }
+}
Index: android/app/src/main/kotlin/com/example/app/MainActivity.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>\npackage com.example.app\n\n\nimport android.Manifest\nimport android.content.Intent\nimport android.content.pm.PackageManager\nimport android.os.Build\nimport android.os.Bundle\nimport android.os.Handler\nimport android.os.Looper\nimport android.os.Message\nimport android.util.Log\nimport android.widget.Toast\nimport androidx.core.app.ActivityCompat\nimport androidx.core.content.ContextCompat\nimport com.shimmerresearch.android.Shimmer\nimport com.shimmerresearch.android.guiUtilities.ShimmerBluetoothDialog\nimport com.shimmerresearch.bluetooth.ShimmerBluetooth\nimport com.shimmerresearch.driver.CallbackObject\nimport com.shimmerresearch.driver.Configuration\nimport com.shimmerresearch.driver.FormatCluster\nimport com.shimmerresearch.driver.ObjectCluster\nimport com.shimmerresearch.exceptions.ShimmerException\nimport io.flutter.embedding.android.FlutterActivity\nimport io.flutter.embedding.engine.FlutterEngine\nimport io.flutter.plugin.common.EventChannel\nimport io.flutter.plugin.common.MethodChannel\nimport java.io.IOException\n\nclass MainActivity : FlutterActivity() {\n    private var channel = \"com.example.emotion_sensor/shimmer\"\n    private var eventChannel = \"com.example.emotion_sensor/shimmer/events\"\n    private var eventSinkChannel: EventChannel.EventSink? = null\n\n    private var mockHandler: Handler? = null\n\n\n    var shimmer: Shimmer? = null //ver depois - sintaxe to initiate\n    //var spinner: Spinner? = null\n    override fun configureFlutterEngine(flutterEngine: FlutterEngine) {\n        super.configureFlutterEngine(flutterEngine)\n        MethodChannel(flutterEngine.dartExecutor.binaryMessenger, channel).setMethodCallHandler { call, result ->\n            when (call.method) {\n                \"connect\" -> {\n                    connectDevice()\n                    result.success(null)\n                }\n                \"startStreaming\" -> {\n                    startStreaming()\n                    //startMockStreaming()\n                    result.success(null)\n                }\n                \"stopStreaming\" -> {\n                    stopStreaming()\n                    //stopMockStreaming()\n                    result.success(null)\n                }\n                \"disconnect\" -> {\n                    disconnectDevice()\n                    result.success(null)\n                }\n            }\n\n        }\n        EventChannel(flutterEngine.dartExecutor.binaryMessenger, eventChannel).setStreamHandler(\n            object : EventChannel.StreamHandler{\n                override fun onListen(arguments: Any?, events: EventChannel.EventSink?) {\n                    eventSinkChannel = events\n                }\n\n                override fun onCancel(arguments: Any?) {\n                    eventSinkChannel = null\n                }\n\n            }\n        )\n\n    }\n\n    override fun onCreate(savedInstanceState: Bundle?) { //main function on Flutter - starting point when I open my app\n        super.onCreate(savedInstanceState)\n        //setContentView(R.layout.activity_main) - for UI\n       checkPermission()\n\n        shimmer = Shimmer(mHandler, this@MainActivity)\n\n        /*spinner = findViewById<View>(R.id.crcSpinner) as Spinner\n        spinner!!.isEnabled = false\n        // Spinner click listener\n        spinner!!.onItemSelectedListener = this\n        val categories: MutableList<String> = ArrayList()\n        categories.add(\"Disable crc\")\n        categories.add(\"Enable 1 byte CRC\")\n        categories.add(\"Enable 2 byte CRC\")\n        // Creating adapter for spinner\n        val dataAdapter = ArrayAdapter(this, R.layout.simple_spinner_item, categories)\n        dataAdapter.setDropDownViewResource(R.layout.simple_spinner_dropdown_item)\n        // attaching data adapter to spinner\n        spinner!!.adapter = dataAdapter */\n\n    }\n\n    fun startMockStreaming() {\n        mockHandler = Handler(Looper.getMainLooper())\n        val runnable = object : Runnable {\n            override fun run() {\n                val mockData = mapOf(\n                    \"timeStamp\" to System.currentTimeMillis().toDouble(),\n                    \"accel\" to (Math.random() * 5),   // -5g to +5g\n                    \"type\" to \"sensorData\",\n                    \"gsrConductance\" to (Math.random() * 5),\n                    \"ppgHeartRate\" to (60 + Math.random() * 40), // HR 60100\n                    \"emgMuscleActivity\" to (Math.random() * 1000)\n                )\n                eventSinkChannel?.success(mockData)\n\n                // re-run every 200ms\n                mockHandler?.postDelayed(this, 200)\n            }\n        }\n        mockHandler?.post(runnable)\n    }\n\n    fun stopMockStreaming() {\n        mockHandler?.removeCallbacksAndMessages(null)\n        mockHandler = null\n    }\n\n    private fun checkPermission(){\n        var permissionGranted = true\n        var permissionCheck = 0\n        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.S) { //asking permition for Bluetooth device\n            permissionCheck =\n                ContextCompat.checkSelfPermission(this, Manifest.permission.BLUETOOTH_CONNECT)\n\n            if (permissionCheck != PackageManager.PERMISSION_GRANTED) {\n                permissionGranted = false\n            }\n            permissionCheck =\n                ContextCompat.checkSelfPermission(this, Manifest.permission.BLUETOOTH_SCAN)\n            if (permissionCheck != PackageManager.PERMISSION_GRANTED) {\n                permissionGranted = false\n            }\n        } else {\n            permissionCheck = ContextCompat.checkSelfPermission(\n                this,\n                Manifest.permission.ACCESS_BACKGROUND_LOCATION\n            )\n            if (permissionCheck != PackageManager.PERMISSION_GRANTED) {\n                permissionGranted = false\n            }\n        }\n        permissionCheck =\n            ContextCompat.checkSelfPermission(this, Manifest.permission.ACCESS_COARSE_LOCATION)\n        if (permissionCheck != PackageManager.PERMISSION_GRANTED) {\n            permissionGranted = false\n        }\n        permissionCheck =\n            ContextCompat.checkSelfPermission(this, Manifest.permission.ACCESS_FINE_LOCATION)\n        if (permissionCheck != PackageManager.PERMISSION_GRANTED) {\n            permissionGranted = false\n        }\n\n\n        if (!permissionGranted) {\n            // Should we show an explanation?\n            if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.S) {\n                ActivityCompat.requestPermissions(\n                    this,\n                    arrayOf(\n                        Manifest.permission.BLUETOOTH_CONNECT,\n                        Manifest.permission.BLUETOOTH_SCAN,\n                        Manifest.permission.ACCESS_COARSE_LOCATION,\n                        Manifest.permission.ACCESS_FINE_LOCATION\n                    ),\n                    110\n                )\n            } else {\n                ActivityCompat.requestPermissions(\n                    this,\n                    arrayOf(\n                        Manifest.permission.ACCESS_COARSE_LOCATION,\n                        Manifest.permission.ACCESS_FINE_LOCATION,\n                        Manifest.permission.ACCESS_BACKGROUND_LOCATION\n                    ),\n                    110\n                )\n            }\n        } else {\n        }\n    }\n/*\n    override fun onItemSelected(parent: AdapterView<*>?, view: View, position: Int, id: Long) {\n        if (spinner!!.isEnabled) {\n            when (position) {\n                0 -> shimmer!!.disableBtCommsCrc()\n                1 -> shimmer!!.enableBtCommsOneByteCrc()\n                2 -> shimmer!!.enableBtCommsTwoByteCrc()\n                else -> {}\n            }\n        }\n    }\n\n    override fun onNothingSelected(parent: AdapterView<*>?) {\n        // Another interface callback\n    }\n*/\n    fun connectDevice() {\n        val intent = Intent(\n            applicationContext,\n            ShimmerBluetoothDialog::class.java\n        )\n        startActivityForResult(intent, ShimmerBluetoothDialog.REQUEST_CONNECT_SHIMMER)\n    }\n\n    fun disconnectDevice() {\n        if (shimmer != null) {\n            shimmer!!.disconnect()\n        }\n    }\n\n    @Throws(InterruptedException::class, IOException::class)\n    fun startStreaming() {\n        try {\n            shimmer!!.startStreaming()\n        } catch (e: ShimmerException) {\n            e.printStackTrace()\n        }\n    }\n\n    @Throws(IOException::class)\n    fun stopStreaming() {\n        shimmer!!.stopStreaming()\n    }\n\n    fun setSamplingRate(samplingRate: Double) {\n        if (shimmer != null && shimmer!!.isConnected()) {\n            try {\n                // Set the sampling rate (in Hz)\n                shimmer!!.samplingRateShimmer = samplingRate\n\n                // Optional: Also set sensors you want to enable\n                // This is important as different sensors may have different supported rates\n\n                Log.i(LOG_TAG, \"Sampling rate set to: $samplingRate Hz\")\n            } catch (e: ShimmerException) {\n                Log.e(LOG_TAG, \"Error setting sampling rate: ${e.message}\")\n                e.printStackTrace()\n            }\n        } else {\n            Log.w(LOG_TAG, \"Shimmer not connected. Cannot set sampling rate.\")\n        }\n    }\n    /**\n     * Messages from the Shimmer device including sensor data are received here\n     */\n    var mHandler: Handler = object : Handler(Looper.getMainLooper()) { //main trede\n        override fun handleMessage(msg: Message) {\n            when (msg.what) { //similar to switch()\n                ShimmerBluetooth.MSG_IDENTIFIER_DATA_PACKET -> if ((msg.obj is ObjectCluster)) {\n                    //Print data to Logcat\n\n                    val objectCluster = msg.obj as ObjectCluster\n\n                    //Retrieve all possible formats for the current sensor device:\n                    val timeStampCluster = ObjectCluster.returnFormatCluster(\n                        objectCluster.getCollectionOfFormatClusters(\n                            Configuration.Shimmer3.ObjectClusterSensorName.TIMESTAMP\n                        ), \"CAL\"\n                    )\n                    val timeStampData = timeStampCluster?.mData ?: -1.0\n                    Log.i(LOG_TAG, \"Time Stamp: $timeStampData\")\n\n                    val accelXCluster = ObjectCluster.returnFormatCluster(\n                        objectCluster.getCollectionOfFormatClusters(\n                            Configuration.Shimmer3.ObjectClusterSensorName.ACCEL_LN_X\n                        ), \"CAL\"\n                    )\n\n                    val accelXData = accelXCluster?.mData ?: -1.0\n                    Log.i(\n                        LOG_TAG,\n                        \"Accel LN X: $accelXData\"\n                    )\n\n                    val gsrCluster = ObjectCluster.returnFormatCluster(\n                        objectCluster.getCollectionOfFormatClusters(\n                            Configuration.Shimmer3.ObjectClusterSensorName.GSR_CONDUCTANCE\n                        ), \"CAL\"\n                    )\n\n                    val gsrConductance = gsrCluster?.mData ?: -1.0\n\n                    Log.i(\n                        LOG_TAG,\n                        \"GSR Conductance: $gsrConductance\"\n                    )\n\n                    val ppgCluster = ObjectCluster.returnFormatCluster(\n                        objectCluster.getCollectionOfFormatClusters(\n                            Configuration.Shimmer3.ObjectClusterSensorName.PPG_TO_HR\n                        ), \"CAL\"\n                    )\n\n                    val ppgHeartRate = ppgCluster?.mData ?: -1.0\n\n                    Log.i(\n                        LOG_TAG,\n                        \"PPG Heart Rate: $ppgHeartRate\"\n                    )\n\n                    val emgCluster = ObjectCluster.returnFormatCluster(\n                        objectCluster.getCollectionOfFormatClusters(\n                            Configuration.Shimmer3.ObjectClusterSensorName.EMG_CH1_16BIT\n                        ), \"CAL\"\n                    )\n\n                    val emgActivity = emgCluster?.mData ?: -1.0\n\n                    Log.i(\n                        LOG_TAG,\n                        \"EMG Muscle Activity: $emgActivity\"\n                    )\n\n\n\n                    val sensorData = mapOf(\n                        \"timeStamp\" to timeStampData,\n                        \"accel\" to accelXData,\n                        \"type\" to \"sensorData\",\n                        \"gsrConductance\" to gsrConductance,\n                        \"ppgHeartRate\" to ppgHeartRate,\n                        \"emgMuscleActivity\" to emgActivity\n                    )\n                    eventSinkChannel?.success(sensorData)\n                }\n\n                Shimmer.MESSAGE_TOAST ->  //messages for the users\n                    /** Toast messages sent from [Shimmer] are received here. E.g. device xxxx now streaming.\n                     * Note that display of these Toast messages is done automatically in the Handler in [com.shimmerresearch.android.shimmerService.ShimmerService]  */\n                    Toast.makeText(\n                        applicationContext,\n                        msg.data.getString(Shimmer.TOAST),\n                        Toast.LENGTH_SHORT\n                    ).show()\n\n                ShimmerBluetooth.MSG_IDENTIFIER_STATE_CHANGE -> {\n                    var state: ShimmerBluetooth.BT_STATE? = null\n                    var macAddress = \"\"\n\n                    if (msg.obj is ObjectCluster) {\n                        state = (msg.obj as ObjectCluster).mState\n                        macAddress = (msg.obj as ObjectCluster).macAddress\n                    } else if (msg.obj is CallbackObject) {\n                        state = (msg.obj as CallbackObject).mState\n                        macAddress = (msg.obj as CallbackObject).mBluetoothAddress\n                    }\n                    val conectionData = mapOf(\n                        \"State\" to state.toString(),\n                        \"type\" to \"connectionData\"\n                    )\n                    eventSinkChannel?.success(conectionData)\n\n                    when (state) { //it checks what the state is\n\n                        /* ShimmerBluetooth.BT_STATE.CONNECTED -> if (shimmer!!.firmwareVersionCode >= 8) {\n                            if (!spinner!!.isEnabled) {\n                                when (shimmer!!.currentBtCommsCrcMode) {\n                                    BT_CRC_MODE.OFF -> spinner!!.setSelection(0)\n                                    BT_CRC_MODE.ONE_BYTE_CRC -> spinner!!.setSelection(1)\n                                    BT_CRC_MODE.TWO_BYTE_CRC -> spinner!!.setSelection(2)\n                                    else -> {}\n                                }\n                            }\n                            spinner!!.isEnabled = true\n                        } */\n\n                        ShimmerBluetooth.BT_STATE.CONNECTING -> {\n\n                        }\n                         ShimmerBluetooth.BT_STATE.STREAMING -> {}\n                        ShimmerBluetooth.BT_STATE.STREAMING_AND_SDLOGGING -> {}\n                        ShimmerBluetooth.BT_STATE.SDLOGGING -> {}\n                        ShimmerBluetooth.BT_STATE.DISCONNECTED -> {\n                            //spinner!!.isEnabled = false\n                            //spinner!!.setSelection(0)\n                        }\n                        else -> {} //default case\n                    }\n                }\n            }\n            super.handleMessage(msg)\n        }\n    }\n\n    /**\n     * Get the result from the paired devices dialog\n     * @param requestCode\n     * @param resultCode\n     * @param data\n     */\n    override fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent?) {\n        data?.let { intentData ->\n            if (requestCode == 2) {\n                if (resultCode == RESULT_OK) {\n                    //Get the Bluetooth mac address of the selected device:\n                    val macAdd = intentData.getStringExtra(ShimmerBluetoothDialog.EXTRA_DEVICE_ADDRESS)\n                    //shimmer = Shimmer(mHandler, this@MainActivity)\n                    shimmer!!.connect(macAdd, \"default\") //Connect to the selected device\n                }\n            }\n        }\n        super.onActivityResult(requestCode, resultCode, data)\n    }\n\n\n    companion object {\n        private const val LOG_TAG = \"ShimmerBasicExample\"\n    }\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/android/app/src/main/kotlin/com/example/app/MainActivity.kt b/android/app/src/main/kotlin/com/example/app/MainActivity.kt
--- a/android/app/src/main/kotlin/com/example/app/MainActivity.kt	(revision 764b7528e9142b5ed946d9cafada38e8141f9a42)
+++ b/android/app/src/main/kotlin/com/example/app/MainActivity.kt	(date 1757662179580)
@@ -21,7 +21,10 @@
 import com.shimmerresearch.driver.Configuration
 import com.shimmerresearch.driver.FormatCluster
 import com.shimmerresearch.driver.ObjectCluster
+import com.shimmerresearch.driverUtilities.ChannelDetails
 import com.shimmerresearch.exceptions.ShimmerException
+import com.shimmerresearch.sensors.SensorGSR
+import com.shimmerresearch.sensors.SensorPPG
 import io.flutter.embedding.android.FlutterActivity
 import io.flutter.embedding.engine.FlutterEngine
 import io.flutter.plugin.common.EventChannel
@@ -47,13 +50,13 @@
                     result.success(null)
                 }
                 "startStreaming" -> {
-                    startStreaming()
-                    //startMockStreaming()
+                    //startStreaming()
+                    startMockStreaming()
                     result.success(null)
                 }
                 "stopStreaming" -> {
-                    stopStreaming()
-                    //stopMockStreaming()
+                    //stopStreaming()
+                    stopMockStreaming()
                     result.success(null)
                 }
                 "disconnect" -> {
@@ -103,25 +106,41 @@
 
     fun startMockStreaming() {
         mockHandler = Handler(Looper.getMainLooper())
+        var index = 0
+        val totalSamples = minOf(SampleData.sampleGsr.size, SampleData.samplePpg.size)
+
         val runnable = object : Runnable {
             override fun run() {
-                val mockData = mapOf(
-                    "timeStamp" to System.currentTimeMillis().toDouble(),
-                    "accel" to (Math.random() * 5),   // -5g to +5g
-                    "type" to "sensorData",
-                    "gsrConductance" to (Math.random() * 5),
-                    "ppgHeartRate" to (60 + Math.random() * 40), // HR 60100
-                    "emgMuscleActivity" to (Math.random() * 1000)
-                )
-                eventSinkChannel?.success(mockData)
+                if (totalSamples > 0) {
+                    // Loop index when reaching the end
+                    if (index >= totalSamples) {
+                        index = 0
+                    }
+
+                    val mockData = mapOf(
+                        "timeStamp" to System.currentTimeMillis().toDouble(),
+                        "type" to "sensorData",
+                        // Use your CSV values
+                        "gsrConductance" to SampleData.sampleGsr[index],
+                        "ppgHeartRate" to SampleData.samplePpg[index],
+                        // Keep your other values randomized if needed
+                        "accel" to (Math.random() * 5),
+                        "emgMuscleActivity" to (Math.random() * 1000)
+                    )
+
+                    eventSinkChannel?.success(mockData)
 
-                // re-run every 200ms
-                mockHandler?.postDelayed(this, 200)
+                    index++
+                }
+
+                // 128Hz  7.8125ms period  round to 8ms
+                mockHandler?.postDelayed(this, 8)
             }
         }
         mockHandler?.post(runnable)
     }
 
+
     fun stopMockStreaming() {
         mockHandler?.removeCallbacksAndMessages(null)
         mockHandler = null
@@ -263,6 +282,13 @@
 
                     val objectCluster = msg.obj as ObjectCluster
 
+                    val adcFormats: Collection<FormatCluster> =
+                        objectCluster.getCollectionOfFormatClusters(SensorGSR.ObjectClusterSensorName.GSR_RESISTANCE)
+                    val format = (ObjectCluster.returnFormatCluster(
+                        adcFormats,
+                        ChannelDetails.CHANNEL_TYPE.CAL.toString()
+                    ) as FormatCluster)
+
                     //Retrieve all possible formats for the current sensor device:
                     val timeStampCluster = ObjectCluster.returnFormatCluster(
                         objectCluster.getCollectionOfFormatClusters(
@@ -290,7 +316,7 @@
                         ), "CAL"
                     )
 
-                    val gsrConductance = gsrCluster?.mData ?: -1.0
+                    val gsrConductance = gsrCluster?.mFormat ?: -1.0
 
                     Log.i(
                         LOG_TAG,
@@ -299,7 +325,7 @@
 
                     val ppgCluster = ObjectCluster.returnFormatCluster(
                         objectCluster.getCollectionOfFormatClusters(
-                            Configuration.Shimmer3.ObjectClusterSensorName.PPG_TO_HR
+                            Configuration.Shimmer3.ObjectClusterSensorName.PPG_TO_HR1
                         ), "CAL"
                     )
 
Index: assets/labels.txt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/assets/labels.txt b/assets/labels.txt
new file mode 100644
--- /dev/null	(date 1758273232000)
+++ b/assets/labels.txt	(date 1758273232000)
@@ -0,0 +1,2 @@
+0 Happy
+1 Angry
Index: lib/pages/scan_page.dart
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>import 'package:app/data/data_source/sensor_local_data_source.dart';\nimport 'package:app/main.dart';\nimport 'package:app/models/sensor_chart_data.dart';\nimport 'package:app/models/sensor_data.dart';\nimport 'package:app/widgets/charts/emg_chart.dart';\nimport 'package:app/widgets/charts/grs_chart.dart';\nimport 'package:app/widgets/charts/accel_chart.dart';\nimport 'package:app/widgets/charts/ppg_chart.dart';\n\nimport 'package:flutter/material.dart';\nimport 'dart:async';\nimport 'dart:math';\n\nimport 'package:app/models/sensor_data.dart';\nimport 'package:app/services/shimmer_service.dart';\nimport 'package:flutter/services.dart';\n\n\nclass ScanPage extends StatefulWidget {\n  const ScanPage({super.key});\n\n  @override\n  State<ScanPage> createState() => _MyWidgetState();\n}\n\nclass _MyWidgetState extends State<ScanPage> {\n  List<SensorData> _sensorDataList = []; // List to store sensor data\n  double previousTimeStamp = 0.0;\n  int maxDataPoint = 100; // Maximum number of data points to display\n  static const EventChannel event_channel = EventChannel(\n    'com.example.emotion_sensor/shimmer/events',\n  );\nstatic const MethodChannel _channel = MethodChannel(\n    'com.example.emotion_sensor/shimmer',\n  );\n\n  StreamSubscription? _streamSubscription;\n  final dataSource = SensorLocalDataSource(isar: isar);\n\n  @override\n  void initState() {\n    super.initState();\n    startListening();\n  }\n\n  void startListening() async{\n    await _startStreaming();\n    listenSensorData();\n  }\n\n  @override\n  void dispose() {\n    super.dispose();\n    _stopStreaming();\n    _streamSubscription?.cancel();\n\n  }\n\n\n Future<void> _stopStreaming() async {\n    await _channel.invokeMethod('stopStreaming');\n  }\n\n Future<void> _startStreaming() async {\n    await _channel.invokeMethod('startStreaming');\n  }\n\n  void listenSensorData() {\n     _streamSubscription = event_channel.receiveBroadcastStream().listen((event) {\n      if (event is Map) {\n        final data = Map<String, dynamic>.from(event);\n        if (data['type'] == 'connectionData') {\n          /*setState(() {\n            connectionState = data['State'] ?? 'Unknown';\n          });*/\n        } else if (data['type'] == 'sensorData') {\n          final currentTimeStamp = data['timeStamp'] as double;\n          if (currentTimeStamp > previousTimeStamp + 100.0) {\n            final sensorData = SensorData(\n              timeStamp: data['timeStamp'] as double?,\n              accelX: data['accel'] as double?,\n              grs: data['gsrConductance'] as double?,\n              ppg: data['ppgHeartRate'] as double?,\n              emg: data['emgMuscleActivity'] as double?,\n            );\n            setState(() {\n              // timeStamp = data['timeStamp'] as double;\n              // accelX = data['accel'] as double;\n              _sensorDataList.add(sensorData);\n            });\n            previousTimeStamp = sensorData.timeStamp!;\n          }\n        }\n      }\n    });\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    double elapseTime = 10.0;\n    if(_sensorDataList.length >= 2) {\n      elapseTime = _sensorDataList.last.timeStamp! - _sensorDataList.first.timeStamp!;\n      elapseTime = elapseTime / 1000.0;\n    }\n    return Scaffold(\n      appBar: AppBar(title: Text('Scan Page', style: TextStyle(color: Colors.black12),)),\n      body: Column(\n        children: [\n          Expanded(\n            child: AccelerometerChart(\n              sensorDataList: _sensorDataList,\n              windowSize: elapseTime,\n            ),\n          ),\n          Expanded(\n            child: PpgChart(\n              sensorDataList: _sensorDataList,\n              windowSize: elapseTime,   \n            ),\n          ),\n          Expanded(\n            child: GrsChart(\n              sensorDataList: _sensorDataList,\n              windowSize: elapseTime,    \n            ),\n          ),\n\n          SizedBox(\n            width: double.infinity,\n            child: ElevatedButton(\n              onPressed: () async {\n                _stopStreaming();\n                dataSource.saveScanSession(_sensorDataList);\n              },\n              child: Text(\n                \"Stop Streaming\",\n                style: TextStyle(fontSize: 20, color: Colors.white),\n              ),\n              style: ElevatedButton.styleFrom(backgroundColor: Colors.blue),\n            ),\n          ),\n        ],\n      ),\n    ); //empty widget\n  }\n}\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/lib/pages/scan_page.dart b/lib/pages/scan_page.dart
--- a/lib/pages/scan_page.dart	(revision 764b7528e9142b5ed946d9cafada38e8141f9a42)
+++ b/lib/pages/scan_page.dart	(date 1758092977845)
@@ -1,20 +1,18 @@
+import 'dart:async';
+
 import 'package:app/data/data_source/sensor_local_data_source.dart';
 import 'package:app/main.dart';
-import 'package:app/models/sensor_chart_data.dart';
 import 'package:app/models/sensor_data.dart';
-import 'package:app/widgets/charts/emg_chart.dart';
-import 'package:app/widgets/charts/grs_chart.dart';
+import 'package:app/services/emotion_interpretor.dart';
 import 'package:app/widgets/charts/accel_chart.dart';
+import 'package:app/widgets/charts/grs_chart.dart';
 import 'package:app/widgets/charts/ppg_chart.dart';
-
+import 'package:camera/camera.dart';
 import 'package:flutter/material.dart';
-import 'dart:async';
-import 'dart:math';
-
-import 'package:app/models/sensor_data.dart';
-import 'package:app/services/shimmer_service.dart';
 import 'package:flutter/services.dart';
 
+import '../services/new_feature_extractor.dart';
+
 
 class ScanPage extends StatefulWidget {
   const ScanPage({super.key});
@@ -36,11 +34,24 @@
 
   StreamSubscription? _streamSubscription;
   final dataSource = SensorLocalDataSource(isar: isar);
+  final interpretor = EmotionInterpretor();
+
+
+
+  void _showSnackBar(String message, {bool isError = false}) {
+    ScaffoldMessenger.of(context).showSnackBar(
+      SnackBar(
+        content: Text(message),
+        backgroundColor: isError ? Colors.redAccent : Colors.green,
+      ),
+    );
+  }
 
   @override
   void initState() {
     super.initState();
     startListening();
+    interpretor.loadModelAndScalers().then((value) => _showSnackBar('Model Loaded'));
   }
 
   void startListening() async{
@@ -130,13 +141,19 @@
             child: ElevatedButton(
               onPressed: () async {
                 _stopStreaming();
+                final features = NewFeatureExtractor.extractFeatures(_sensorDataList);
+                debugPrint('Data points: ${_sensorDataList.last}');
+                debugPrint('Extracted Features: $features');
+                debugPrint('Features Length: ${features.values.length}');
+                final output =  interpretor.predict(features.values.toList());
+                debugPrint('Predicted Emotion: $output');
                 dataSource.saveScanSession(_sensorDataList);
               },
+              style: ElevatedButton.styleFrom(backgroundColor: Colors.blue),
               child: Text(
                 "Stop Streaming",
                 style: TextStyle(fontSize: 20, color: Colors.white),
               ),
-              style: ElevatedButton.styleFrom(backgroundColor: Colors.blue),
             ),
           ),
         ],
Index: .idea/libraries/Flutter_Plugins.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><component name=\"libraryTable\">\n  <library name=\"Flutter Plugins\" type=\"FlutterPluginsLibraryType\">\n    <CLASSES>\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/path_provider_android-2.2.17\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/path_provider_foundation-2.4.2\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/path_provider-2.1.5\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/path_provider_windows-2.3.0\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.isar-community.dev/isar_flutter_libs-3.1.8\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/path_provider_linux-2.2.1\" />\n    </CLASSES>\n    <JAVADOC />\n    <SOURCES />\n  </library>\n</component>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/libraries/Flutter_Plugins.xml b/.idea/libraries/Flutter_Plugins.xml
--- a/.idea/libraries/Flutter_Plugins.xml	(revision 764b7528e9142b5ed946d9cafada38e8141f9a42)
+++ b/.idea/libraries/Flutter_Plugins.xml	(date 1758115638023)
@@ -7,6 +7,11 @@
       <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/path_provider_windows-2.3.0" />
       <root url="file://$USER_HOME$/.pub-cache/hosted/pub.isar-community.dev/isar_flutter_libs-3.1.8" />
       <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/path_provider_linux-2.2.1" />
+      <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/tflite_flutter-0.11.0" />
+      <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/camera_avfoundation-0.9.21+2" />
+      <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/camera-0.11.2" />
+      <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/camera_web-0.3.5" />
+      <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/camera_android_camerax-0.6.19+1" />
     </CLASSES>
     <JAVADOC />
     <SOURCES />
Index: .idea/libraries/Dart_Packages.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><component name=\"libraryTable\">\n  <library name=\"Dart Packages\" type=\"DartPackagesLibraryType\">\n    <properties>\n      <option name=\"packageNameToDirsMap\">\n        <entry key=\"_fe_analyzer_shared\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/_fe_analyzer_shared-76.0.0/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"_macros\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/flutter/bin/cache/dart-sdk/pkg/_macros/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"analyzer\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/analyzer-6.11.0/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"args\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/args-2.7.0/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"async\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/async-2.12.0/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"boolean_selector\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/boolean_selector-2.1.2/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"build\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/build-2.5.4/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"build_config\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/build_config-1.1.2/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"build_daemon\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/build_daemon-4.0.4/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"build_resolvers\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/build_resolvers-2.5.4/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"build_runner\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/build_runner-2.5.4/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"build_runner_core\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/build_runner_core-9.1.2/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"built_collection\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/built_collection-5.1.1/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"built_value\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/built_value-8.11.1/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"characters\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/characters-1.4.0/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"checked_yaml\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/checked_yaml-2.0.3/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"clock\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/clock-1.1.2/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"code_builder\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/code_builder-4.10.1/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"collection\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/collection-1.19.1/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"convert\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/convert-3.1.2/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"crypto\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/crypto-3.0.6/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"cupertino_icons\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/cupertino_icons-1.0.8/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"dart_style\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/dart_style-2.3.8/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"dartx\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/dartx-1.2.0/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"equatable\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/equatable-2.0.7/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"fake_async\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/fake_async-1.3.2/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"ffi\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/ffi-2.1.4/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"file\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/file-7.0.1/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"fixnum\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/fixnum-1.1.1/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"fl_chart\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/fl_chart-1.0.0/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"flutter\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/flutter/packages/flutter/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"flutter_lints\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/flutter_lints-5.0.0/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"flutter_test\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/flutter/packages/flutter_test/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"frontend_server_client\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/frontend_server_client-4.0.0/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"glob\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/glob-2.1.3/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"graphs\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/graphs-2.3.2/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"http\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/http-1.5.0/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"http_multi_server\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/http_multi_server-3.2.2/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"http_parser\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/http_parser-4.1.2/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"intl\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/intl-0.20.2/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"io\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/io-1.0.5/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"isar\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.isar-community.dev/isar-3.1.8/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"isar_flutter_libs\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.isar-community.dev/isar_flutter_libs-3.1.8/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"isar_generator\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.isar-community.dev/isar_generator-3.1.8/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"js\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/js-0.7.2/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"json_annotation\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/json_annotation-4.9.0/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"leak_tracker\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/leak_tracker-10.0.8/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"leak_tracker_flutter_testing\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/leak_tracker_flutter_testing-3.0.9/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"leak_tracker_testing\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/leak_tracker_testing-3.0.1/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"lints\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/lints-5.1.1/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"logging\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/logging-1.3.0/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"macros\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/macros-0.1.3-main.0/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"matcher\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/matcher-0.12.17/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"material_color_utilities\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/material_color_utilities-0.11.1/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"meta\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/meta-1.16.0/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"mime\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/mime-2.0.0/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"package_config\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/package_config-2.2.0/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"path\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/path-1.9.1/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"path_provider\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/path_provider-2.1.5/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"path_provider_android\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/path_provider_android-2.2.17/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"path_provider_foundation\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/path_provider_foundation-2.4.2/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"path_provider_linux\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/path_provider_linux-2.2.1/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"path_provider_platform_interface\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/path_provider_platform_interface-2.1.2/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"path_provider_windows\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/path_provider_windows-2.3.0/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"platform\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/platform-3.1.6/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"plugin_platform_interface\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/plugin_platform_interface-2.1.8/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"pool\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/pool-1.5.1/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"pub_semver\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/pub_semver-2.2.0/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"pubspec_parse\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/pubspec_parse-1.5.0/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"shelf\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/shelf-1.4.2/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"shelf_web_socket\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/shelf_web_socket-3.0.0/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"sky_engine\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/flutter/bin/cache/pkg/sky_engine/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"source_gen\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/source_gen-1.5.0/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"source_span\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/source_span-1.10.1/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"stack_trace\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/stack_trace-1.12.1/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"stream_channel\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/stream_channel-2.1.4/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"stream_transform\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/stream_transform-2.1.1/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"string_scanner\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/string_scanner-1.4.1/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"term_glyph\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/term_glyph-1.2.2/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"test_api\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/test_api-0.7.4/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"time\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/time-2.1.5/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"timing\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/timing-1.0.2/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"typed_data\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/typed_data-1.4.0/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"vector_math\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/vector_math-2.1.4/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"vm_service\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/vm_service-14.3.1/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"watcher\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/watcher-1.1.2/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"web\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/web-1.1.1/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"web_socket\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/web_socket-1.0.1/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"web_socket_channel\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/web_socket_channel-3.0.3/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"xdg_directories\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/xdg_directories-1.1.0/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"xxh3\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/xxh3-1.2.0/lib\" />\n            </list>\n          </value>\n        </entry>\n        <entry key=\"yaml\">\n          <value>\n            <list>\n              <option value=\"$USER_HOME$/.pub-cache/hosted/pub.dev/yaml-3.1.3/lib\" />\n            </list>\n          </value>\n        </entry>\n      </option>\n    </properties>\n    <CLASSES>\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/_fe_analyzer_shared-76.0.0/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/analyzer-6.11.0/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/args-2.7.0/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/async-2.12.0/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/boolean_selector-2.1.2/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/build-2.5.4/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/build_config-1.1.2/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/build_daemon-4.0.4/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/build_resolvers-2.5.4/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/build_runner-2.5.4/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/build_runner_core-9.1.2/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/built_collection-5.1.1/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/built_value-8.11.1/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/characters-1.4.0/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/checked_yaml-2.0.3/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/clock-1.1.2/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/code_builder-4.10.1/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/collection-1.19.1/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/convert-3.1.2/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/crypto-3.0.6/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/cupertino_icons-1.0.8/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/dart_style-2.3.8/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/dartx-1.2.0/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/equatable-2.0.7/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/fake_async-1.3.2/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/ffi-2.1.4/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/file-7.0.1/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/fixnum-1.1.1/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/fl_chart-1.0.0/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/flutter_lints-5.0.0/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/frontend_server_client-4.0.0/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/glob-2.1.3/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/graphs-2.3.2/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/http-1.5.0/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/http_multi_server-3.2.2/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/http_parser-4.1.2/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/intl-0.20.2/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/io-1.0.5/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/js-0.7.2/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/json_annotation-4.9.0/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/leak_tracker-10.0.8/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/leak_tracker_flutter_testing-3.0.9/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/leak_tracker_testing-3.0.1/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/lints-5.1.1/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/logging-1.3.0/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/macros-0.1.3-main.0/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/matcher-0.12.17/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/material_color_utilities-0.11.1/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/meta-1.16.0/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/mime-2.0.0/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/package_config-2.2.0/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/path-1.9.1/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/path_provider-2.1.5/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/path_provider_android-2.2.17/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/path_provider_foundation-2.4.2/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/path_provider_linux-2.2.1/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/path_provider_platform_interface-2.1.2/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/path_provider_windows-2.3.0/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/platform-3.1.6/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/plugin_platform_interface-2.1.8/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/pool-1.5.1/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/pub_semver-2.2.0/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/pubspec_parse-1.5.0/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/shelf-1.4.2/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/shelf_web_socket-3.0.0/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/source_gen-1.5.0/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/source_span-1.10.1/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/stack_trace-1.12.1/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/stream_channel-2.1.4/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/stream_transform-2.1.1/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/string_scanner-1.4.1/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/term_glyph-1.2.2/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/test_api-0.7.4/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/time-2.1.5/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/timing-1.0.2/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/typed_data-1.4.0/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/vector_math-2.1.4/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/vm_service-14.3.1/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/watcher-1.1.2/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/web-1.1.1/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/web_socket-1.0.1/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/web_socket_channel-3.0.3/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/xdg_directories-1.1.0/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/xxh3-1.2.0/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.dev/yaml-3.1.3/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.isar-community.dev/isar-3.1.8/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.isar-community.dev/isar_flutter_libs-3.1.8/lib\" />\n      <root url=\"file://$USER_HOME$/.pub-cache/hosted/pub.isar-community.dev/isar_generator-3.1.8/lib\" />\n      <root url=\"file://$USER_HOME$/flutter/bin/cache/dart-sdk/pkg/_macros/lib\" />\n      <root url=\"file://$USER_HOME$/flutter/bin/cache/pkg/sky_engine/lib\" />\n      <root url=\"file://$USER_HOME$/flutter/packages/flutter/lib\" />\n      <root url=\"file://$USER_HOME$/flutter/packages/flutter_test/lib\" />\n    </CLASSES>\n    <JAVADOC />\n    <SOURCES />\n  </library>\n</component>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/libraries/Dart_Packages.xml b/.idea/libraries/Dart_Packages.xml
--- a/.idea/libraries/Dart_Packages.xml	(revision 764b7528e9142b5ed946d9cafada38e8141f9a42)
+++ b/.idea/libraries/Dart_Packages.xml	(date 1758115638021)
@@ -23,6 +23,13 @@
             </list>
           </value>
         </entry>
+        <entry key="archive">
+          <value>
+            <list>
+              <option value="$USER_HOME$/.pub-cache/hosted/pub.dev/archive-4.0.7/lib" />
+            </list>
+          </value>
+        </entry>
         <entry key="args">
           <value>
             <list>
@@ -100,6 +107,41 @@
             </list>
           </value>
         </entry>
+        <entry key="camera">
+          <value>
+            <list>
+              <option value="$USER_HOME$/.pub-cache/hosted/pub.dev/camera-0.11.2/lib" />
+            </list>
+          </value>
+        </entry>
+        <entry key="camera_android_camerax">
+          <value>
+            <list>
+              <option value="$USER_HOME$/.pub-cache/hosted/pub.dev/camera_android_camerax-0.6.19+1/lib" />
+            </list>
+          </value>
+        </entry>
+        <entry key="camera_avfoundation">
+          <value>
+            <list>
+              <option value="$USER_HOME$/.pub-cache/hosted/pub.dev/camera_avfoundation-0.9.21+2/lib" />
+            </list>
+          </value>
+        </entry>
+        <entry key="camera_platform_interface">
+          <value>
+            <list>
+              <option value="$USER_HOME$/.pub-cache/hosted/pub.dev/camera_platform_interface-2.10.0/lib" />
+            </list>
+          </value>
+        </entry>
+        <entry key="camera_web">
+          <value>
+            <list>
+              <option value="$USER_HOME$/.pub-cache/hosted/pub.dev/camera_web-0.3.5/lib" />
+            </list>
+          </value>
+        </entry>
         <entry key="characters">
           <value>
             <list>
@@ -142,6 +184,13 @@
             </list>
           </value>
         </entry>
+        <entry key="cross_file">
+          <value>
+            <list>
+              <option value="$USER_HOME$/.pub-cache/hosted/pub.dev/cross_file-0.3.4+2/lib" />
+            </list>
+          </value>
+        </entry>
         <entry key="crypto">
           <value>
             <list>
@@ -226,10 +275,24 @@
             </list>
           </value>
         </entry>
+        <entry key="flutter_plugin_android_lifecycle">
+          <value>
+            <list>
+              <option value="$USER_HOME$/.pub-cache/hosted/pub.dev/flutter_plugin_android_lifecycle-2.0.30/lib" />
+            </list>
+          </value>
+        </entry>
         <entry key="flutter_test">
           <value>
             <list>
               <option value="$USER_HOME$/flutter/packages/flutter_test/lib" />
+            </list>
+          </value>
+        </entry>
+        <entry key="flutter_web_plugins">
+          <value>
+            <list>
+              <option value="$USER_HOME$/flutter/packages/flutter_web_plugins/lib" />
             </list>
           </value>
         </entry>
@@ -275,6 +338,13 @@
             </list>
           </value>
         </entry>
+        <entry key="image">
+          <value>
+            <list>
+              <option value="$USER_HOME$/.pub-cache/hosted/pub.dev/image-4.5.4/lib" />
+            </list>
+          </value>
+        </entry>
         <entry key="intl">
           <value>
             <list>
@@ -450,6 +520,13 @@
             </list>
           </value>
         </entry>
+        <entry key="petitparser">
+          <value>
+            <list>
+              <option value="$USER_HOME$/.pub-cache/hosted/pub.dev/petitparser-6.1.0/lib" />
+            </list>
+          </value>
+        </entry>
         <entry key="platform">
           <value>
             <list>
@@ -471,6 +548,13 @@
             </list>
           </value>
         </entry>
+        <entry key="posix">
+          <value>
+            <list>
+              <option value="$USER_HOME$/.pub-cache/hosted/pub.dev/posix-6.0.3/lib" />
+            </list>
+          </value>
+        </entry>
         <entry key="pub_semver">
           <value>
             <list>
@@ -485,6 +569,13 @@
             </list>
           </value>
         </entry>
+        <entry key="quiver">
+          <value>
+            <list>
+              <option value="$USER_HOME$/.pub-cache/hosted/pub.dev/quiver-3.2.2/lib" />
+            </list>
+          </value>
+        </entry>
         <entry key="shelf">
           <value>
             <list>
@@ -559,6 +650,13 @@
           <value>
             <list>
               <option value="$USER_HOME$/.pub-cache/hosted/pub.dev/test_api-0.7.4/lib" />
+            </list>
+          </value>
+        </entry>
+        <entry key="tflite_flutter">
+          <value>
+            <list>
+              <option value="$USER_HOME$/.pub-cache/hosted/pub.dev/tflite_flutter-0.11.0/lib" />
             </list>
           </value>
         </entry>
@@ -632,6 +730,13 @@
             </list>
           </value>
         </entry>
+        <entry key="xml">
+          <value>
+            <list>
+              <option value="$USER_HOME$/.pub-cache/hosted/pub.dev/xml-6.5.0/lib" />
+            </list>
+          </value>
+        </entry>
         <entry key="xxh3">
           <value>
             <list>
@@ -651,6 +756,7 @@
     <CLASSES>
       <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/_fe_analyzer_shared-76.0.0/lib" />
       <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/analyzer-6.11.0/lib" />
+      <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/archive-4.0.7/lib" />
       <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/args-2.7.0/lib" />
       <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/async-2.12.0/lib" />
       <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/boolean_selector-2.1.2/lib" />
@@ -662,12 +768,18 @@
       <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/build_runner_core-9.1.2/lib" />
       <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/built_collection-5.1.1/lib" />
       <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/built_value-8.11.1/lib" />
+      <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/camera-0.11.2/lib" />
+      <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/camera_android_camerax-0.6.19+1/lib" />
+      <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/camera_avfoundation-0.9.21+2/lib" />
+      <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/camera_platform_interface-2.10.0/lib" />
+      <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/camera_web-0.3.5/lib" />
       <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/characters-1.4.0/lib" />
       <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/checked_yaml-2.0.3/lib" />
       <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/clock-1.1.2/lib" />
       <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/code_builder-4.10.1/lib" />
       <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/collection-1.19.1/lib" />
       <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/convert-3.1.2/lib" />
+      <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/cross_file-0.3.4+2/lib" />
       <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/crypto-3.0.6/lib" />
       <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/cupertino_icons-1.0.8/lib" />
       <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/dart_style-2.3.8/lib" />
@@ -679,12 +791,14 @@
       <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/fixnum-1.1.1/lib" />
       <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/fl_chart-1.0.0/lib" />
       <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/flutter_lints-5.0.0/lib" />
+      <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/flutter_plugin_android_lifecycle-2.0.30/lib" />
       <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/frontend_server_client-4.0.0/lib" />
       <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/glob-2.1.3/lib" />
       <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/graphs-2.3.2/lib" />
       <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/http-1.5.0/lib" />
       <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/http_multi_server-3.2.2/lib" />
       <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/http_parser-4.1.2/lib" />
+      <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/image-4.5.4/lib" />
       <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/intl-0.20.2/lib" />
       <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/io-1.0.5/lib" />
       <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/js-0.7.2/lib" />
@@ -707,11 +821,14 @@
       <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/path_provider_linux-2.2.1/lib" />
       <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/path_provider_platform_interface-2.1.2/lib" />
       <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/path_provider_windows-2.3.0/lib" />
+      <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/petitparser-6.1.0/lib" />
       <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/platform-3.1.6/lib" />
       <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/plugin_platform_interface-2.1.8/lib" />
       <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/pool-1.5.1/lib" />
+      <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/posix-6.0.3/lib" />
       <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/pub_semver-2.2.0/lib" />
       <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/pubspec_parse-1.5.0/lib" />
+      <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/quiver-3.2.2/lib" />
       <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/shelf-1.4.2/lib" />
       <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/shelf_web_socket-3.0.0/lib" />
       <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/source_gen-1.5.0/lib" />
@@ -722,6 +839,7 @@
       <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/string_scanner-1.4.1/lib" />
       <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/term_glyph-1.2.2/lib" />
       <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/test_api-0.7.4/lib" />
+      <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/tflite_flutter-0.11.0/lib" />
       <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/time-2.1.5/lib" />
       <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/timing-1.0.2/lib" />
       <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/typed_data-1.4.0/lib" />
@@ -732,6 +850,7 @@
       <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/web_socket-1.0.1/lib" />
       <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/web_socket_channel-3.0.3/lib" />
       <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/xdg_directories-1.1.0/lib" />
+      <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/xml-6.5.0/lib" />
       <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/xxh3-1.2.0/lib" />
       <root url="file://$USER_HOME$/.pub-cache/hosted/pub.dev/yaml-3.1.3/lib" />
       <root url="file://$USER_HOME$/.pub-cache/hosted/pub.isar-community.dev/isar-3.1.8/lib" />
@@ -741,6 +860,7 @@
       <root url="file://$USER_HOME$/flutter/bin/cache/pkg/sky_engine/lib" />
       <root url="file://$USER_HOME$/flutter/packages/flutter/lib" />
       <root url="file://$USER_HOME$/flutter/packages/flutter_test/lib" />
+      <root url="file://$USER_HOME$/flutter/packages/flutter_web_plugins/lib" />
     </CLASSES>
     <JAVADOC />
     <SOURCES />
Index: pubspec.yaml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>name: app\ndescription: \"A new Flutter project.\"\n# The following line prevents the package from being accidentally published to\n# pub.dev using `flutter pub publish`. This is preferred for private packages.\npublish_to: 'none' # Remove this line if you wish to publish to pub.dev\n\n# The following defines the version and build number for your application.\n# A version number is three numbers separated by dots, like 1.2.43\n# followed by an optional build number separated by a +.\n# Both the version and the builder number may be overridden in flutter\n# build by specifying --build-name and --build-number, respectively.\n# In Android, build-name is used as versionName while build-number used as versionCode.\n# Read more about Android versioning at https://developer.android.com/studio/publish/versioning\n# In iOS, build-name is used as CFBundleShortVersionString while build-number is used as CFBundleVersion.\n# Read more about iOS versioning at\n# https://developer.apple.com/library/archive/documentation/General/Reference/InfoPlistKeyReference/Articles/CoreFoundationKeys.html\n# In Windows, build-name is used as the major, minor, and patch parts\n# of the product and file versions while build-number is used as the build suffix.\nversion: 1.0.0+1\n\nenvironment:\n  sdk: ^3.7.2\n\n# Dependencies specify other packages that your package needs in order to work.\n# To automatically upgrade your package dependencies to the latest versions\n# consider running `flutter pub upgrade --major-versions`. Alternatively,\n# dependencies can be manually updated by changing the version numbers below to\n# the latest version available on pub.dev. To see which dependencies have newer\n# versions available, run `flutter pub outdated`.\ndependencies:\n  flutter:\n    sdk: flutter\n\n  # The following adds the Cupertino Icons font to your application.\n  # Use with the CupertinoIcons class for iOS style icons.\n  cupertino_icons: ^1.0.8\n  fl_chart: ^1.0.0\n  isar:\n    version: 3.1.8\n    hosted: https://pub.isar-community.dev/\n  isar_flutter_libs:\n    version: 3.1.8\n    hosted: https://pub.isar-community.dev/\n  path_provider: ^2.1.5\n  intl: ^0.20.2\n\ndev_dependencies:\n  flutter_test:\n    sdk: flutter\n\n  # The \"flutter_lints\" package below contains a set of recommended lints to\n  # encourage good coding practices. The lint set provided by the package is\n  # activated in the `analysis_options.yaml` file located at the root of your\n  # package. See that file for information about deactivating specific lint\n  # rules and activating additional ones.\n  flutter_lints: ^5.0.0\n  isar_generator: \n    version: 3.1.8\n    hosted: https://pub.isar-community.dev/\n  build_runner: ^2.4.9\n\n# For information on the generic Dart part of this file, see the\n# following page: https://dart.dev/tools/pub/pubspec\n\n# The following section is specific to Flutter packages.\nflutter:\n\n  # The following line ensures that the Material Icons font is\n  # included with your application, so that you can use the icons in\n  # the material Icons class.\n  uses-material-design: true\n\n  # To add assets to your application, add an assets section, like this:\n  # assets:\n  #   - images/a_dot_burr.jpeg\n  #   - images/a_dot_ham.jpeg\n\n  # An image asset can refer to one or more resolution-specific \"variants\", see\n  # https://flutter.dev/to/resolution-aware-images\n\n  # For details regarding adding assets from package dependencies, see\n  # https://flutter.dev/to/asset-from-package\n\n  # To add custom fonts to your application, add a fonts section here,\n  # in this \"flutter\" section. Each entry in this list should have a\n  # \"family\" key with the font family name, and a \"fonts\" key with a\n  # list giving the asset and other descriptors for the font. For\n  # example:\n  # fonts:\n  #   - family: Schyler\n  #     fonts:\n  #       - asset: fonts/Schyler-Regular.ttf\n  #       - asset: fonts/Schyler-Italic.ttf\n  #         style: italic\n  #   - family: Trajan Pro\n  #     fonts:\n  #       - asset: fonts/TrajanPro.ttf\n  #       - asset: fonts/TrajanPro_Bold.ttf\n  #         weight: 700\n  #\n  # For details regarding fonts from package dependencies,\n  # see https://flutter.dev/to/font-from-package\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/pubspec.yaml b/pubspec.yaml
--- a/pubspec.yaml	(revision 764b7528e9142b5ed946d9cafada38e8141f9a42)
+++ b/pubspec.yaml	(date 1758114175278)
@@ -43,6 +43,9 @@
     hosted: https://pub.isar-community.dev/
   path_provider: ^2.1.5
   intl: ^0.20.2
+  tflite_flutter: ^0.11.0
+  camera: ^0.11.2
+  image: ^4.5.4
 
 dev_dependencies:
   flutter_test:
@@ -65,15 +68,10 @@
 # The following section is specific to Flutter packages.
 flutter:
 
-  # The following line ensures that the Material Icons font is
-  # included with your application, so that you can use the icons in
-  # the material Icons class.
   uses-material-design: true
 
-  # To add assets to your application, add an assets section, like this:
-  # assets:
-  #   - images/a_dot_burr.jpeg
-  #   - images/a_dot_ham.jpeg
+  assets:
+    - assets/
 
   # An image asset can refer to one or more resolution-specific "variants", see
   # https://flutter.dev/to/resolution-aware-images
Index: android/app/build.gradle.kts
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>plugins {\n    id(\"com.android.application\")\n    id(\"kotlin-android\")\n    // The Flutter Gradle Plugin must be applied after the Android and Kotlin Gradle plugins.\n    id(\"dev.flutter.flutter-gradle-plugin\")\n}\n\nandroid {\n    namespace = \"com.example.app\"\n    compileSdk = flutter.compileSdkVersion\n    ndkVersion = flutter.ndkVersion\n\n    compileOptions {\n        sourceCompatibility = JavaVersion.VERSION_11\n        targetCompatibility = JavaVersion.VERSION_11\n    }\n\n    kotlinOptions {\n        jvmTarget = JavaVersion.VERSION_11.toString()\n    }\n\n    packagingOptions {\n        resources.excludes.addAll(\n            listOf(\n                \"META-INF/DEPENDENCIES\",\n                \"META-INF/LICENSE\",\n                \"META-INF/LICENSE.txt\",\n                \"META-INF/NOTICE\",\n                \"META-INF/NOTICE.txt\",\n                \"META-INF/ASL2.0\"\n            )\n        )\n        resources.pickFirsts.add(\"**/libc++_shared.so\")\n    }\n\n    defaultConfig {\n        // TODO: Specify your own unique Application ID (https://developer.android.com/studio/build/application-id.html).\n        applicationId = \"com.example.app\"\n        // You can update the following values to match your application needs.\n        // For more information, see: https://flutter.dev/to/review-gradle-config.\n        minSdk = flutter.minSdkVersion\n        targetSdk = flutter.targetSdkVersion\n        versionCode = flutter.versionCode\n        versionName = flutter.versionName\n    }\n\n    buildTypes {\n        getByName(\"release\") {\n            signingConfig = signingConfigs.getByName(\"debug\")\n            packagingOptions {\n                resources.excludes.addAll(\n                    listOf(\n                        \"META-INF/DEPENDENCIES\",\n                        \"META-INF/LICENSE\",\n                        \"META-INF/NOTICE\"\n                    )\n                )\n            }\n        }\n    }\n}\n\n\n\n\n\n\n    dependencies {\n\n        implementation(\"com.shimmerresearch:shimmerbluetoothmanager:0.11.3_beta\") {\n            exclude(group = \"io.netty\")\n            exclude(group = \"com.google.protobuf\")\n            exclude(group = \"org.apache.commons.math\")\n        }\n\n\n\n\n\n        implementation(\"com.shimmerresearch:shimmerdriver:0.11.3_beta\") {\n            exclude(group = \"io.netty\")\n            exclude(group = \"com.google.protobuf\")\n        }\n\n\n        implementation(\"com.shimmerresearch:shimmerandroidinstrumentdriver:3.2.2_beta@aar\")\n    }\n\n    flutter {\n        source = \"../..\"\n    }\n\ndependencies {\n    implementation(\"com.shimmerresearch:shimmerbluetoothmanager:0.11.3_beta\") {\n        exclude(group = \"io.netty\")\n        exclude(group = \"com.google.protobuf\")\n        exclude(group = \"org.apache.commons.math\")\n    }\n\n    implementation(\"com.shimmerresearch:shimmerdriver:0.11.3_beta\") {\n        exclude(group = \"io.netty\")\n        exclude(group = \"com.google.protobuf\")\n    }\n\n    implementation(\"com.shimmerresearch:shimmerandroidinstrumentdriver:3.2.2_beta@aar\")\n}\n\nflutter {\n    source = \"../..\"\n}\n\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/android/app/build.gradle.kts b/android/app/build.gradle.kts
--- a/android/app/build.gradle.kts	(revision 764b7528e9142b5ed946d9cafada38e8141f9a42)
+++ b/android/app/build.gradle.kts	(date 1758101279987)
@@ -8,7 +8,7 @@
 android {
     namespace = "com.example.app"
     compileSdk = flutter.compileSdkVersion
-    ndkVersion = flutter.ndkVersion
+    ndkVersion = "27.0.12077973"
 
     compileOptions {
         sourceCompatibility = JavaVersion.VERSION_11
diff --git a/lib/services/camera_model.dart b/lib/services/camera_model.dart
new file mode 100644
